"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{86959:function(e,t,n){n.d(t,{UH:function(){return nB}});var r,a,i,o,s,u,c,l,d,p,f,h,m,v,y=n(99891),g=n(65225),k=n(64434),S=n(37405),b=n(58746),_=n(18660),w=n(20941),x=n(87022),I=n(97033),C=n(4581),E=n(74001),T=n.n(E),M=n(32654),R=n(60193),A=n(68684),O=n(47713),D=n(43469),L=n(84065),N=n(68788),F=n(6315),P=n(98505),B=n(84945),U=n(68884),z=n(7678),Z=n(59097),j=n(70723),W=n(84413),H=n(43747),q=n(54784),K=n(12573),V=n(56673),J=n(61327),Y=n(26255),G=n(21564),X=n(32703),$=n(39385),Q=n(4249);function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,S.Z)(e);if(t){var a=(0,S.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,k.Z)(this,n)}}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach(function(t){(0,x.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function er(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ea(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ei=B.n2,eo="sentryReplaySession",es="Unable to send Replay";function eu(e){for(var t=void 0,n=e[0],r=1;r<e.length;){var a=e[r],i=e[r+1];if(r+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):("call"===a||"optionalCall"===a)&&(n=i(function(){for(var e,r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=n).call.apply(e,[t].concat(a))}),t=void 0)}return n}function ec(e){var t=eu([e,"optionalAccess",function(e){return e.host}]);return eu([t,"optionalAccess",function(e){return e.shadowRoot}])===e}function el(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function ed(e){try{var t,n=e.rules||e.cssRules;return n?((t=Array.from(n,ep).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}}function ep(e){var t;if("styleSheet"in e)try{t=ed(e.styleSheet)||function(e){var t=e.cssText;if(t.split('"').length<3)return t;var n=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?n.push("layer"):e.layerName&&n.push("layer(".concat(e.layerName,")")),e.supportsText&&n.push("supports(".concat(e.supportsText,")")),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if("selectorText"in e&&e.selectorText.includes(":"))return e.cssText.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2");return t||e.cssText}(r=c||(c={}))[r.Document=0]="Document",r[r.DocumentType=1]="DocumentType",r[r.Element=2]="Element",r[r.Text=3]="Text",r[r.CDATA=4]="CDATA",r[r.Comment=5]="Comment";var ef=function(){function e(){(0,I.Z)(this,e),this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return(0,C.Z)(e,[{key:"getId",value:function(e){var t;return e&&null!=(t=eu([this,"access",function(e){return e.getMeta},"call",function(t){return t(e)},"optionalAccess",function(e){return e.id}]))?t:-1}},{key:"getNode",value:function(e){return this.idNodeMap.get(e)||null}},{key:"getIds",value:function(){return Array.from(this.idNodeMap.keys())}},{key:"getMeta",value:function(e){return this.nodeMetaMap.get(e)||null}},{key:"removeNodeFromMap",value:function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(function(e){return t.removeNodeFromMap(e)})}},{key:"has",value:function(e){return this.idNodeMap.has(e)}},{key:"hasNode",value:function(e){return this.nodeMetaMap.has(e)}},{key:"add",value:function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}},{key:"replace",value:function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)}},{key:"reset",value:function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}]),e}();function eh(e){var t=e.maskInputOptions,n=e.tagName,r=e.type;return"OPTION"===n&&(n="SELECT"),!!(t[n.toLowerCase()]||r&&t[r]||"password"===r||"INPUT"===n&&!r&&t.text)}function em(e){var t=e.isMasked,n=e.element,r=e.value,a=e.maskInputFn,i=r||"";return t?(a&&(i=a(i,n)),"*".repeat(i.length)):i}function ev(e){return e.toLowerCase()}function ey(e){return e.toUpperCase()}var eg="__rrweb_original__";function ek(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?ev(t):null}function eS(e,t,n){return"INPUT"===t&&("radio"===n||"checkbox"===n)?e.getAttribute("value")||"":e.value}var eb=1,e_=RegExp("[^a-z0-9-_:]");function ew(){return eb++}var ex=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,eI=/^(?:[a-z+]+:)?\/\//i,eC=/^www\..*/i,eE=/^(data:)([^,]*),(.*)/i;function eT(e,t){return(e||"").replace(ex,function(e,n,r,a,i,o){var s=r||i||o,u=n||a||"";if(!s)return e;if(eI.test(s)||eC.test(s)||eE.test(s))return"url(".concat(u).concat(s).concat(u,")");if("/"===s[0])return"url(".concat(u).concat((t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0]).split("?")[0]+s).concat(u,")");var c=t.split("/"),l=s.split("/");c.pop();var d,p=er(l);try{for(p.s();!(d=p.n()).done;){var f=d.value;"."!==f&&(".."===f?c.pop():c.push(f))}}catch(e){p.e(e)}finally{p.f()}return"url(".concat(u).concat(c.join("/")).concat(u,")")})}var eM=/^[^ \t\n\r\u000c]+/,eR=/^[, \t\n\r\u000c]+/;function eA(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function eO(){var e=document.createElement("a");return e.href="",e.href}function eD(e,t,n,r,a,i){return r?"src"!==n&&("href"!==n||"use"===t&&"#"===r[0])&&("xlink:href"!==n||"#"===r[0])&&("background"!==n||"table"!==t&&"td"!==t&&"th"!==t)?"srcset"===n?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,a=e.exec(t.substring(n));return a?(r=a[0],n+=r.length,r):""}for(var a=[];r(eR),!(n>=t.length);){var i=r(eM);if(","===i.slice(-1))i=eA(e,i.substring(0,i.length-1)),a.push(i);else{var o="";i=eA(e,i);for(var s=!1;;){var u=t.charAt(n);if(""===u){a.push((i+o).trim());break}if(s)")"===u&&(s=!1);else{if(","===u){n+=1,a.push((i+o).trim());break}"("===u&&(s=!0)}o+=u,n+=1}}}return a.join(", ")}(e,r):"style"===n?eT(r,eO()):"object"===t&&"data"===n?eA(e,r):"function"==typeof i?i(n,r,a):r:eA(e,r):r}function eL(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function eN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:eN(e.parentNode,t,n,r+1)}function eF(e,t){return function(n){if(null===n)return!1;try{if(e){if("string"==typeof e){if(n.matches(".".concat(e)))return!0}else if(function(e,t){for(var n=e.classList.length;n--;){var r=e.classList[n];if(t.test(r))return!0}return!1}(n,e))return!0}if(t&&n.matches(t))return!0;return!1}catch(e){return!1}}}function eP(e,t,n,r,a,i){try{var o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===o)return!1;if("INPUT"===o.tagName){var s=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(s))return!0}var u=-1,c=-1;if(i){if((c=eN(o,eF(r,a)))<0)return!0;u=eN(o,eF(t,n),c>=0?c:1/0)}else{if((u=eN(o,eF(t,n)))<0)return!1;c=eN(o,eF(r,a),u>=0?u:1/0)}return u>=0?!(c>=0)||u<=c:!(c>=0)&&!!i}catch(e){}return!!i}function eB(e){return null==e?"":e.toLowerCase()}function eU(e,t){var n,r=t.doc,a=t.mirror,i=t.blockClass,o=t.blockSelector,s=t.unblockSelector,u=t.maskAllText,p=t.maskTextClass,f=t.unmaskTextClass,h=t.maskTextSelector,m=t.unmaskTextSelector,v=t.skipChild,y=void 0!==v&&v,g=t.inlineStylesheet,k=void 0===g||g,S=t.maskInputOptions,b=void 0===S?{}:S,_=t.maskAttributeFn,w=t.maskTextFn,x=t.maskInputFn,I=t.slimDOMOptions,C=t.dataURLOptions,E=void 0===C?{}:C,T=t.inlineImages,M=void 0!==T&&T,R=t.recordCanvas,A=void 0!==R&&R,O=t.onSerialize,D=t.onIframeLoad,L=t.iframeLoadTimeout,N=void 0===L?5e3:L,F=t.onStylesheetLoad,P=t.stylesheetLoadTimeout,B=void 0===P?5e3:P,U=t.keepIframeSrcFn,z=void 0===U?function(){return!1}:U,Z=t.newlyAddedElement,j=t.preserveWhiteSpace,W=void 0===j||j,H=function(e,t){var n=t.doc,r=t.mirror,a=t.blockClass,i=t.blockSelector,o=t.unblockSelector,s=t.maskAllText,u=t.maskAttributeFn,p=t.maskTextClass,f=t.unmaskTextClass,h=t.maskTextSelector,m=t.unmaskTextSelector,v=t.inlineStylesheet,y=t.maskInputOptions,g=void 0===y?{}:y,k=t.maskTextFn,S=t.maskInputFn,b=t.dataURLOptions,_=t.inlineImages,w=t.recordCanvas,x=t.keepIframeSrcFn,I=t.newlyAddedElement,C=function(e,t){if(t.hasNode(e)){var n=t.getId(e);return 1===n?void 0:n}}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:if("CSS1Compat"!==e.compatMode)return{type:c.Document,childNodes:[],compatMode:e.compatMode};return{type:c.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:c.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:C};case e.ELEMENT_NODE:return function(e,t){for(var n,r=t.doc,a=t.blockClass,i=t.blockSelector,o=t.unblockSelector,s=t.inlineStylesheet,u=t.maskInputOptions,p=void 0===u?{}:u,f=t.maskAttributeFn,h=t.maskInputFn,m=t.dataURLOptions,v=void 0===m?{}:m,y=t.inlineImages,g=t.recordCanvas,k=t.keepIframeSrcFn,S=t.newlyAddedElement,b=t.rootId,_=(t.maskAllText,t.maskTextClass),w=t.unmaskTextClass,x=t.maskTextSelector,I=t.unmaskTextSelector,C=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var a=e.classList.length;a--;){var i=e.classList[a];if(t.test(i))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,a,i,o),E=function(e){if(e instanceof HTMLFormElement)return"form";var t=ev(e.tagName);return e_.test(t)?"div":t}(e),T={},M=e.attributes.length,R=0;R<M;R++){var A=e.attributes[R];A.name&&!eL(E,A.name,A.value)&&(T[A.name]=eD(r,E,ev(A.name),A.value,e,f))}if("link"===E&&s){var O=Array.from(r.styleSheets).find(function(t){return t.href===e.href}),D=null;O&&(D=ed(O)),D&&(delete T.rel,delete T.href,T._cssText=eT(D,O.href))}if("style"===E&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var L=ed(e.sheet);L&&(T._cssText=eT(L,eO()))}if("input"===E||"textarea"===E||"select"===E||"option"===E){var N=ek(e),F=eS(e,ey(E),N),P=e.checked;if("submit"!==N&&"button"!==N&&F){var B=eP(e,_,x,w,I,eh({type:N,tagName:ey(E),maskInputOptions:p}));T.value=em({isMasked:B,element:e,value:F,maskInputFn:h})}P&&(T.checked=P)}if("option"===E&&(e.selected&&!p.select?T.selected=!0:delete T.selected),"canvas"===E&&g){if("2d"===e.__context)!function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var a=t.getImageData,i=eg in a?a[eg]:a;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some(function(e){return 0!==e}))return!1}return!0}(e)&&(T.rr_dataURL=e.toDataURL(v.type,v.quality));else if(!("__context"in e)){var U=e.toDataURL(v.type,v.quality),z=document.createElement("canvas");z.width=e.width,z.height=e.height,U!==z.toDataURL(v.type,v.quality)&&(T.rr_dataURL=U)}}if("img"===E&&y){l||(d=(l=r.createElement("canvas")).getContext("2d"));var Z=e.crossOrigin;e.crossOrigin="anonymous";var j=function t(){e.removeEventListener("load",t);try{l.width=e.naturalWidth,l.height=e.naturalHeight,d.drawImage(e,0,0),T.rr_dataURL=l.toDataURL(v.type,v.quality)}catch(t){console.warn("Cannot inline img src=".concat(e.currentSrc,"! Error: ").concat(t))}Z?T.crossOrigin=Z:e.removeAttribute("crossorigin")};e.complete&&0!==e.naturalWidth?j():e.addEventListener("load",j)}if(("audio"===E||"video"===E)&&(T.rr_mediaState=e.paused?"paused":"played",T.rr_mediaCurrentTime=e.currentTime),!(void 0!==S&&S)&&(e.scrollLeft&&(T.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(T.rr_scrollTop=e.scrollTop)),C){var W=e.getBoundingClientRect(),H=W.width,q=W.height;T={class:T.class,rr_width:"".concat(H,"px"),rr_height:"".concat(q,"px")}}"iframe"!==E||k(T.src)||(e.contentDocument||(T.rr_src=T.src),delete T.src);try{customElements.get(E)&&(n=!0)}catch(e){}return{type:c.Element,tagName:E,attributes:T,childNodes:[],isSVG:!!("svg"===e.tagName||e.ownerSVGElement)||void 0,needBlock:C,rootId:b,isCustom:n}}(e,{doc:n,blockClass:a,blockSelector:i,unblockSelector:o,inlineStylesheet:v,maskAttributeFn:u,maskInputOptions:g,maskInputFn:S,dataURLOptions:void 0===b?{}:b,inlineImages:_,recordCanvas:w,keepIframeSrcFn:x,newlyAddedElement:void 0!==I&&I,rootId:C,maskAllText:s,maskTextClass:p,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:m});case e.TEXT_NODE:return function(e,t){var n=t.maskAllText,r=t.maskTextClass,a=t.unmaskTextClass,i=t.maskTextSelector,o=t.unmaskTextSelector,s=t.maskTextFn,u=t.maskInputOptions,l=t.maskInputFn,d=t.rootId,p=e.parentNode&&e.parentNode.tagName,f=e.textContent,h="STYLE"===p||void 0,m="SCRIPT"===p||void 0,v="TEXTAREA"===p||void 0;if(h&&f){try{e.nextSibling||e.previousSibling||eu([e,"access",function(e){return e.parentNode},"access",function(e){return e.sheet},"optionalAccess",function(e){return e.cssRules}])&&(f=ed(e.parentNode.sheet))}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),e)}f=eT(f,eO())}m&&(f="SCRIPT_PLACEHOLDER");var y=eP(e,r,i,a,o,n);return h||m||v||!f||!y||(f=s?s(f):f.replace(/[\S]/g,"*")),v&&f&&(u.textarea||y)&&(f=l?l(f,e.parentNode):f.replace(/[\S]/g,"*")),"OPTION"===p&&f&&(f=em({isMasked:eP(e,r,i,a,o,eh({type:null,tagName:p,maskInputOptions:u})),element:e,value:f,maskInputFn:l})),{type:c.Text,textContent:f||"",isStyle:h,rootId:d}}(e,{maskAllText:s,maskTextClass:p,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:m,maskTextFn:k,maskInputOptions:g,maskInputFn:S,rootId:C});case e.CDATA_SECTION_NODE:return{type:c.CDATA,textContent:"",rootId:C};case e.COMMENT_NODE:return{type:c.Comment,textContent:e.textContent||"",rootId:C};default:return!1}}(e,{doc:r,mirror:a,blockClass:i,blockSelector:o,maskAllText:u,unblockSelector:s,maskTextClass:p,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:m,inlineStylesheet:k,maskInputOptions:b,maskAttributeFn:_,maskTextFn:w,maskInputFn:x,dataURLOptions:E,inlineImages:M,recordCanvas:A,keepIframeSrcFn:z,newlyAddedElement:void 0!==Z&&Z});if(!H)return console.warn(e,"not serialized"),null;n=a.hasNode(e)?a.getId(e):!function(e,t){if(t.comment&&e.type===c.Comment)return!0;if(e.type===c.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js"))||t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(eB(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===eB(e.attributes.name)||"icon"===eB(e.attributes.rel)||"apple-touch-icon"===eB(e.attributes.rel)||"shortcut icon"===eB(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&eB(e.attributes.name).match(/^description|keywords$/)||t.headMetaSocial&&(eB(e.attributes.property).match(/^(og|twitter|fb):/)||eB(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===eB(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===eB(e.attributes.name)||"googlebot"===eB(e.attributes.name)||"bingbot"===eB(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;else if(t.headMetaAuthorship&&("author"===eB(e.attributes.name)||"generator"===eB(e.attributes.name)||"framework"===eB(e.attributes.name)||"publisher"===eB(e.attributes.name)||"progid"===eB(e.attributes.name)||eB(e.attributes.property).match(/^article:/)||eB(e.attributes.property).match(/^product:/)))return!0;else if(t.headMetaVerification&&("google-site-verification"===eB(e.attributes.name)||"yandex-verification"===eB(e.attributes.name)||"csrf-token"===eB(e.attributes.name)||"p:domain_verify"===eB(e.attributes.name)||"verify-v1"===eB(e.attributes.name)||"verification"===eB(e.attributes.name)||"shopify-checkout-api-token"===eB(e.attributes.name)))return!0}}return!1}(H,I)&&(W||H.type!==c.Text||H.isStyle||H.textContent.replace(/^\s+|\s+$/gm,"").length)?ew():-2;var q=Object.assign(H,{id:n});if(a.add(e,q),-2===n)return null;O&&O(e);var K=!y;if(q.type===c.Element){K=K&&!q.needBlock,delete q.needBlock;var V=e.shadowRoot;V&&el(V)&&(q.isShadowHost=!0)}if((q.type===c.Document||q.type===c.Element)&&K){I.headWhitespace&&q.type===c.Element&&"head"===q.tagName&&(W=!1);for(var J={doc:r,mirror:a,blockClass:i,blockSelector:o,maskAllText:u,unblockSelector:s,maskTextClass:p,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:m,skipChild:y,inlineStylesheet:k,maskInputOptions:b,maskAttributeFn:_,maskTextFn:w,maskInputFn:x,slimDOMOptions:I,dataURLOptions:E,inlineImages:M,recordCanvas:A,preserveWhiteSpace:W,onSerialize:O,onIframeLoad:D,iframeLoadTimeout:N,onStylesheetLoad:F,stylesheetLoadTimeout:B,keepIframeSrcFn:z},Y=0,G=Array.from(e.childNodes);Y<G.length;Y++){var X=eU(G[Y],J);X&&q.childNodes.push(X)}if(e.nodeType===e.ELEMENT_NODE&&e.shadowRoot)for(var $=0,Q=Array.from(e.shadowRoot.childNodes);$<Q.length;$++){var ee=eU(Q[$],J);ee&&(el(e.shadowRoot)&&(ee.isShadow=!0),q.childNodes.push(ee))}}return e.parentNode&&ec(e.parentNode)&&el(e.parentNode)&&(q.isShadow=!0),q.type===c.Element&&"iframe"===q.tagName&&function(e,t,n){var r,a=e.contentWindow;if(a){var i=!1;try{r=a.document.readyState}catch(e){return}if("complete"!==r){var o=setTimeout(function(){i||(t(),i=!0)},n);e.addEventListener("load",function(){clearTimeout(o),i=!0,t()});return}var s="about:blank";if(a.location.href!==s||e.src===s||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}(e,function(){var t=e.contentDocument;if(t&&D){var n=eU(t,{doc:t,mirror:a,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:u,maskTextClass:p,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:k,maskInputOptions:b,maskAttributeFn:_,maskTextFn:w,maskInputFn:x,slimDOMOptions:I,dataURLOptions:E,inlineImages:M,recordCanvas:A,preserveWhiteSpace:W,onSerialize:O,onIframeLoad:D,iframeLoadTimeout:N,onStylesheetLoad:F,stylesheetLoadTimeout:B,keepIframeSrcFn:z});n&&D(e,n)}},N),q.type===c.Element&&"link"===q.tagName&&"stylesheet"===q.attributes.rel&&function(e,t,n){var r,a=!1;try{r=e.sheet}catch(e){return}if(!r){var i=setTimeout(function(){a||(t(),a=!0)},n);e.addEventListener("load",function(){clearTimeout(i),a=!0,t()})}}(e,function(){if(F){var t=eU(e,{doc:r,mirror:a,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:u,maskTextClass:p,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:k,maskInputOptions:b,maskAttributeFn:_,maskTextFn:w,maskInputFn:x,slimDOMOptions:I,dataURLOptions:E,inlineImages:M,recordCanvas:A,preserveWhiteSpace:W,onSerialize:O,onIframeLoad:D,iframeLoadTimeout:N,onStylesheetLoad:F,stylesheetLoadTimeout:B,keepIframeSrcFn:z});t&&F(e,t)}},B),q}function ez(e){for(var t=void 0,n=e[0],r=1;r<e.length;){var a=e[r],i=e[r+1];if(r+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):("call"===a||"optionalCall"===a)&&(n=i(function(){for(var e,r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=n).call.apply(e,[t].concat(a))}),t=void 0)}return n}function eZ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}var ej="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",eW={map:{},getId:function(){return console.error(ej),-1},getNode:function(){return console.error(ej),null},removeNodeFromMap:function(){console.error(ej)},has:function(){return console.error(ej),!1},reset:function(){console.error(ej)}};function eH(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null,a=0;return function(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];var u=Date.now();a||!1!==n.leading||(a=u);var c=t-(u-a),l=this;c<=0||c>t?(r&&(clearTimeout(r),r=null),a=u,e.apply(l,o)):r||!1===n.trailing||(r=setTimeout(function(){a=!1===n.leading?0:Date.now(),r=null,e.apply(l,o)},c))}}function eq(e,t,n){try{if(!(t in e))return function(){};var r=e[t],a=n(r);return"function"==typeof a&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=a,function(){e[t]=r}}catch(e){return function(){}}}window.Proxy&&window.Reflect&&(eW=new Proxy(eW,{get:function(e,t,n){return"map"===t&&console.error(ej),Reflect.get(e,t,n)}}));var eK=Date.now;function eV(e){var t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:ez([t,"optionalAccess",function(e){return e.documentElement},"access",function(e){return e.scrollLeft}])||ez([t,"optionalAccess",function(e){return e.body},"optionalAccess",function(e){return e.parentElement},"optionalAccess",function(e){return e.scrollLeft}])||ez([t,"optionalAccess",function(e){return e.body},"optionalAccess",function(e){return e.scrollLeft}])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:ez([t,"optionalAccess",function(e){return e.documentElement},"access",function(e){return e.scrollTop}])||ez([t,"optionalAccess",function(e){return e.body},"optionalAccess",function(e){return e.parentElement},"optionalAccess",function(e){return e.scrollTop}])||ez([t,"optionalAccess",function(e){return e.body},"optionalAccess",function(e){return e.scrollTop}])||0}}function eJ(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function eY(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function eG(e,t,n,r,a){if(!e)return!1;var i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!i)return!1;var o=eF(t,n);if(!a){var s=r&&i.matches(r);return o(i)&&!s}var u=eN(i,o),c=-1;return!(u<0)&&(r&&(c=eN(i,eF(null,r))),u>-1&&c<0||u<c)}function eX(e,t){return -2===t.getId(e)}function e$(e){return!!e.changedTouches}function eQ(e,t){return!!("IFRAME"===e.nodeName&&t.getMeta(e))}function e0(e,t){return!!("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function e1(e){return!!ez([e,"optionalAccess",function(e){return e.shadowRoot}])}/[1-9][0-9]{12}/.test(Date.now().toString())||(eK=function(){return new Date().getTime()});var e2=function(){function e(){(0,I.Z)(this,e),this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}return(0,C.Z)(e,[{key:"getId",value:function(e){return(0,M.h)(this.styleIDMap.get(e),function(){return -1})}},{key:"has",value:function(e){return this.styleIDMap.has(e)}},{key:"add",value:function(e,t){var n;return this.has(e)?this.getId(e):(n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n)}},{key:"getStyle",value:function(e){return this.idStyleMap.get(e)||null}},{key:"reset",value:function(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}},{key:"generateId",value:function(){return this.id++}}]),e}();function e3(e){var t=null;return ez([e,"access",function(e){return e.getRootNode},"optionalCall",function(e){return e()},"optionalAccess",function(e){return e.nodeType}])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function e5(e){var t=e.ownerDocument;return!!t&&(t.contains(e)||function(e){var t=e.ownerDocument;if(!t)return!1;var n=function(e){for(var t,n=e;t=e3(n);)n=t;return n}(e);return t.contains(n)}(e))}var e4=((a=e4||{})[a.DomContentLoaded=0]="DomContentLoaded",a[a.Load=1]="Load",a[a.FullSnapshot=2]="FullSnapshot",a[a.IncrementalSnapshot=3]="IncrementalSnapshot",a[a.Meta=4]="Meta",a[a.Custom=5]="Custom",a[a.Plugin=6]="Plugin",a),e8=((i=e8||{})[i.Mutation=0]="Mutation",i[i.MouseMove=1]="MouseMove",i[i.MouseInteraction=2]="MouseInteraction",i[i.Scroll=3]="Scroll",i[i.ViewportResize=4]="ViewportResize",i[i.Input=5]="Input",i[i.TouchMove=6]="TouchMove",i[i.MediaInteraction=7]="MediaInteraction",i[i.StyleSheetRule=8]="StyleSheetRule",i[i.CanvasMutation=9]="CanvasMutation",i[i.Font=10]="Font",i[i.Log=11]="Log",i[i.Drag=12]="Drag",i[i.StyleDeclaration=13]="StyleDeclaration",i[i.Selection=14]="Selection",i[i.AdoptedStyleSheet=15]="AdoptedStyleSheet",i[i.CustomElement=16]="CustomElement",i),e6=((o=e6||{})[o.MouseUp=0]="MouseUp",o[o.MouseDown=1]="MouseDown",o[o.Click=2]="Click",o[o.ContextMenu=3]="ContextMenu",o[o.DblClick=4]="DblClick",o[o.Focus=5]="Focus",o[o.Blur=6]="Blur",o[o.TouchStart=7]="TouchStart",o[o.TouchMove_Departed=8]="TouchMove_Departed",o[o.TouchEnd=9]="TouchEnd",o[o.TouchCancel=10]="TouchCancel",o),e7=((s=e7||{})[s.Mouse=0]="Mouse",s[s.Pen=1]="Pen",s[s.Touch=2]="Touch",s),e9=function(){function e(){(0,I.Z)(this,e),this.length=0,this.head=null,this.tail=null}return(0,C.Z)(e,[{key:"get",value:function(e){if(e>=this.length)throw Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=function(e){for(var t=void 0,n=e[0],r=1;r<e.length;){var a=e[r],i=e[r+1];if(r+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):("call"===a||"optionalCall"===a)&&(n=i(function(){for(var e,r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=n).call.apply(e,[t].concat(a))}),t=void 0)}return n}([t,"optionalAccess",function(e){return e.next}])||null;return t}},{key:"addNode",value:function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&"__ln"in e.previousSibling){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&"__ln"in e.nextSibling&&e.nextSibling.__ln.previous){var r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}},{key:"removeNode",value:function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}]),e}(),te=function(e,t){return"".concat(e,"@").concat(t)},tt=function(){function e(){var t=this;(0,I.Z)(this,e),this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(e){e.forEach(t.processMutation),t.emit()},this.emit=function(){if(!t.frozen&&!t.locked){for(var e=[],n=new Set,r=new e9,a=function(e){for(var n=e,r=-2;-2===r;)r=(n=n&&n.nextSibling)&&t.mirror.getId(n);return r},i=function(i){if(i.parentNode&&e5(i)){var o=ec(i.parentNode)?t.mirror.getId(e3(i)):t.mirror.getId(i.parentNode),s=a(i);if(-1===o||-1===s)return r.addNode(i);var u=eU(i,{doc:t.doc,mirror:t.mirror,blockClass:t.blockClass,blockSelector:t.blockSelector,maskAllText:t.maskAllText,unblockSelector:t.unblockSelector,maskTextClass:t.maskTextClass,unmaskTextClass:t.unmaskTextClass,maskTextSelector:t.maskTextSelector,unmaskTextSelector:t.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:t.inlineStylesheet,maskInputOptions:t.maskInputOptions,maskAttributeFn:t.maskAttributeFn,maskTextFn:t.maskTextFn,maskInputFn:t.maskInputFn,slimDOMOptions:t.slimDOMOptions,dataURLOptions:t.dataURLOptions,recordCanvas:t.recordCanvas,inlineImages:t.inlineImages,onSerialize:function(e){eQ(e,t.mirror)&&t.iframeManager.addIframe(e),e0(e,t.mirror)&&t.stylesheetManager.trackLinkElement(e),e1(i)&&t.shadowDomManager.addShadowRoot(i.shadowRoot,t.doc)},onIframeLoad:function(e,n){t.iframeManager.attachIframe(e,n),t.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:function(e,n){t.stylesheetManager.attachLinkElement(e,n)}});u&&(e.push({parentId:o,nextId:s,node:u}),n.add(u.id))}};t.mapRemoves.length;)t.mirror.removeNodeFromMap(t.mapRemoves.shift());var o,s=er(t.movedSet);try{for(s.s();!(o=s.n()).done;){var u=o.value;(!tr(t.removes,u,t.mirror)||t.movedSet.has(u.parentNode))&&i(u)}}catch(e){s.e(e)}finally{s.f()}var c,l=er(t.addedSet);try{for(l.s();!(c=l.n()).done;){var d=c.value;ta(t.droppedSet,d)||tr(t.removes,d,t.mirror)?ta(t.movedSet,d)?i(d):t.droppedSet.add(d):i(d)}}catch(e){l.e(e)}finally{l.f()}for(var p=null;r.length;){var f=null;if(p){var h=t.mirror.getId(p.value.parentNode),m=a(p.value);-1!==h&&-1!==m&&(f=p)}if(!f)for(var v=r.tail;v;){var y=v;if(v=v.previous,y){var g=t.mirror.getId(y.value.parentNode);if(-1===a(y.value))continue;if(-1!==g){f=y;break}var k=y.value;if(k.parentNode&&k.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var S=k.parentNode.host;if(-1!==t.mirror.getId(S)){f=y;break}}}}if(!f){for(;r.head;)r.removeNode(r.head.value);break}p=f.previous,r.removeNode(f.value),i(f.value)}var b={texts:t.texts.map(function(e){return{id:t.mirror.getId(e.node),value:e.value}}).filter(function(e){return!n.has(e.id)}).filter(function(e){return t.mirror.has(e.id)}),attributes:t.attributes.map(function(e){var n=e.attributes;if("string"==typeof n.style){var r=JSON.stringify(e.styleDiff),a=JSON.stringify(e._unchangedStyles);r.length<n.style.length&&(r+a).split("var(").length===n.style.split("var(").length&&(n.style=e.styleDiff)}return{id:t.mirror.getId(e.node),attributes:n}}).filter(function(e){return!n.has(e.id)}).filter(function(e){return t.mirror.has(e.id)}),removes:t.removes,adds:e};(b.texts.length||b.attributes.length||b.removes.length||b.adds.length)&&(t.texts=[],t.attributes=[],t.removes=[],t.addedSet=new Set,t.movedSet=new Set,t.droppedSet=new Set,t.movedMap={},t.mutationCb(b))}},this.processMutation=function(e){if(!eX(e.target,t.mirror)){try{n=document.implementation.createHTMLDocument()}catch(e){n=t.doc}switch(e.type){case"characterData":var n,r=e.target.textContent;eG(e.target,t.blockClass,t.blockSelector,t.unblockSelector,!1)||r===e.oldValue||t.texts.push({value:eP(e.target,t.maskTextClass,t.maskTextSelector,t.unmaskTextClass,t.unmaskTextSelector,t.maskAllText)&&r?t.maskTextFn?t.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:e.target});break;case"attributes":var a=e.target,i=e.attributeName,o=e.target.getAttribute(i);if("value"===i){var s=ek(a),u=a.tagName;o=eS(a,u,s);var c=eh({maskInputOptions:t.maskInputOptions,tagName:u,type:s});o=em({isMasked:eP(e.target,t.maskTextClass,t.maskTextSelector,t.unmaskTextClass,t.unmaskTextSelector,c),element:a,value:o,maskInputFn:t.maskInputFn})}if(eG(e.target,t.blockClass,t.blockSelector,t.unblockSelector,!1)||o===e.oldValue)return;var l=t.attributes.find(function(t){return t.node===e.target});if("IFRAME"===a.tagName&&"src"===i&&!t.keepIframeSrcFn(o)){if(a.contentDocument)return;i="rr_src"}if(l||(l={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},t.attributes.push(l)),"type"===i&&"INPUT"===a.tagName&&"password"===(e.oldValue||"").toLowerCase()&&a.setAttribute("data-rr-is-password","true"),!eL(a.tagName,i)&&(l.attributes[i]=eD(t.doc,ev(a.tagName),ev(i),o,a,t.maskAttributeFn),"style"===i)){var d=n.createElement("span");e.oldValue&&d.setAttribute("style",e.oldValue);for(var p=0,f=Array.from(a.style);p<f.length;p++){var h=f[p],m=a.style.getPropertyValue(h),v=a.style.getPropertyPriority(h);m!==d.style.getPropertyValue(h)||v!==d.style.getPropertyPriority(h)?""===v?l.styleDiff[h]=m:l.styleDiff[h]=[m,v]:l._unchangedStyles[h]=[m,v]}for(var y=0,g=Array.from(d.style);y<g.length;y++){var k=g[y];""===a.style.getPropertyValue(k)&&(l.styleDiff[k]=!1)}}break;case"childList":if(eG(e.target,t.blockClass,t.blockSelector,t.unblockSelector,!0))return;e.addedNodes.forEach(function(n){return t.genAdds(n,e.target)}),e.removedNodes.forEach(function(n){var r=t.mirror.getId(n),a=ec(e.target)?t.mirror.getId(e.target.host):t.mirror.getId(e.target);eG(e.target,t.blockClass,t.blockSelector,t.unblockSelector,!1)||eX(n,t.mirror)||-1===t.mirror.getId(n)||(t.addedSet.has(n)?(tn(t.addedSet,n),t.droppedSet.add(n)):t.addedSet.has(e.target)&&-1===r||function e(t,n){if(ec(t))return!1;var r=n.getId(t);return!n.has(r)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||e(t.parentNode,n))}(e.target,t.mirror)||(t.movedSet.has(n)&&t.movedMap[te(r,a)]?tn(t.movedSet,n):t.removes.push({parentId:a,id:r,isShadow:!!(ec(e.target)&&el(e.target))||void 0})),t.mapRemoves.push(n))})}}},this.genAdds=function(e,n){if(!t.processedNodeManager.inOtherBuffer(e,t)&&!(t.addedSet.has(e)||t.movedSet.has(e))){if(t.mirror.hasNode(e)){if(eX(e,t.mirror))return;t.movedSet.add(e);var r=null;n&&t.mirror.hasNode(n)&&(r=t.mirror.getId(n)),r&&-1!==r&&(t.movedMap[te(t.mirror.getId(e),r)]=!0)}else t.addedSet.add(e),t.droppedSet.delete(e);!eG(e,t.blockClass,t.blockSelector,t.unblockSelector,!1)&&(e.childNodes.forEach(function(e){return t.genAdds(e)}),e1(e)&&e.shadowRoot.childNodes.forEach(function(n){t.processedNodeManager.add(n,t),t.genAdds(n,e)}))}}}return(0,C.Z)(e,[{key:"init",value:function(e){var t=this;["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(function(n){t[n]=e[n]})}},{key:"freeze",value:function(){this.frozen=!0,this.canvasManager.freeze()}},{key:"unfreeze",value:function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}},{key:"isFrozen",value:function(){return this.frozen}},{key:"lock",value:function(){this.locked=!0,this.canvasManager.lock()}},{key:"unlock",value:function(){this.locked=!1,this.canvasManager.unlock(),this.emit()}},{key:"reset",value:function(){this.shadowDomManager.reset(),this.canvasManager.reset()}}]),e}();function tn(e,t){e.delete(t),t.childNodes.forEach(function(t){return tn(e,t)})}function tr(e,t,n){return 0!==e.length&&function e(t,n,r){var a=n.parentNode;if(!a)return!1;var i=r.getId(a);return!!t.some(function(e){return e.id===i})||e(t,a,r)}(e,t,n)}function ta(e,t){return 0!==e.size&&function e(t,n){var r=n.parentNode;return!!r&&(!!t.has(r)||e(t,r))}(e,t)}var ti=function(e){return f?function(){try{return e.apply(void 0,arguments)}catch(e){if(f&&!0===f(e))return function(){};throw e}}:e};function to(e){for(var t=void 0,n=e[0],r=1;r<e.length;){var a=e[r],i=e[r+1];if(r+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):("call"===a||"optionalCall"===a)&&(n=i(function(){for(var e,r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=n).call.apply(e,[t].concat(a))}),t=void 0)}return n}var ts=[];function tu(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function tc(e,t){var n=new tt;ts.push(n),n.init(e);var r=window.MutationObserver||window.__rrMutationObserver,a=to([window,"optionalAccess",function(e){return e.Zone},"optionalAccess",function(e){return e.__symbol__},"optionalCall",function(e){return e("MutationObserver")}]);a&&window[a]&&(r=window[a]);var i=new r(ti(function(t){e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function tl(e){var t=e.scrollCb,n=e.doc,r=e.mirror,a=e.blockClass,i=e.blockSelector,o=e.unblockSelector,s=e.sampling;return eZ("scroll",ti(eH(ti(function(e){var s=tu(e);if(!(!s||eG(s,a,i,o,!0))){var u=r.getId(s);if(s===n&&n.defaultView){var c=eV(n.defaultView);t({id:u,x:c.left,y:c.top})}else t({id:u,x:s.scrollLeft,y:s.scrollTop})}}),s.scroll||100)),n)}var td=["INPUT","TEXTAREA","SELECT"],tp=new WeakMap;function tf(e){var t;return t=[],ty("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||ty("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||ty("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||ty("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule?t.unshift(Array.from(e.parentRule.cssRules).indexOf(e)):e.parentStyleSheet&&t.unshift(Array.from(e.parentStyleSheet.cssRules).indexOf(e)),t}function th(e,t,n){var r,a;return e?(e.ownerNode?r=t.getId(e.ownerNode):a=n.getId(e),{styleId:a,id:r}):{}}function tm(e,t){var n=e.mirror,r=e.stylesheetManager,a=null;a="#document"===t.nodeName?n.getId(t):n.getId(t.host);var i="#document"===t.nodeName?to([t,"access",function(e){return e.defaultView},"optionalAccess",function(e){return e.Document}]):to([t,"access",function(e){return e.ownerDocument},"optionalAccess",function(e){return e.defaultView},"optionalAccess",function(e){return e.ShadowRoot}]),o=to([i,"optionalAccess",function(e){return e.prototype}])?Object.getOwnPropertyDescriptor(to([i,"optionalAccess",function(e){return e.prototype}]),"adoptedStyleSheets"):void 0;return null!==a&&-1!==a&&i&&o?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:function(){var e=this;return to([o,"access",function(e){return e.get},"optionalAccess",function(e){return e.call},"call",function(t){return t(e)}])},set:function(e){var t=this,n=to([o,"access",function(e){return e.set},"optionalAccess",function(e){return e.call},"call",function(n){return n(t,e)}]);if(null!==a&&-1!==a)try{r.adoptStyleSheets(e,a)}catch(e){}return n}}),ti(function(){Object.defineProperty(t,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})})):function(){}}function tv(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.doc.defaultView;if(!t)return function(){};var n,r,a,i,o,s,u,c,l,d,p,f,h,m,v,y,g,k,S,b,x,I,C,E,T,M,R,A,O,D,L=tc(e,e.doc),N=function(e){var t,n=e.mousemoveCb,r=e.sampling,a=e.doc,i=e.mirror;if(!1===r.mousemove)return function(){};var o="number"==typeof r.mousemove?r.mousemove:50,s="number"==typeof r.mousemoveCallback?r.mousemoveCallback:500,u=[],c=eH(ti(function(e){var r=Date.now()-t;n(u.map(function(e){return e.timeOffset-=r,e}),e),u=[],t=null}),s),l=ti(eH(ti(function(e){var n=tu(e),r=e$(e)?e.changedTouches[0]:e,a=r.clientX,o=r.clientY;t||(t=eK()),u.push({x:a,y:o,id:i.getId(n),timeOffset:eK()-t}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?e8.Drag:e instanceof MouseEvent?e8.MouseMove:e8.TouchMove)}),o,{trailing:!1})),d=[eZ("mousemove",l,a),eZ("touchmove",l,a),eZ("drag",l,a)];return ti(function(){d.forEach(function(e){return e()})})}(e),F=function(e){var t=e.mouseInteractionCb,n=e.doc,r=e.mirror,a=e.blockClass,i=e.blockSelector,o=e.unblockSelector,s=e.sampling;if(!1===s.mouseInteraction)return function(){};var u=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,c=[],l=null;return Object.keys(e6).filter(function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==u[e]}).forEach(function(e){var s=ev(e);if(window.PointerEvent)switch(e6[e]){case e6.MouseDown:case e6.MouseUp:s=s.replace("mouse","pointer");break;case e6.TouchStart:case e6.TouchEnd:return}c.push(eZ(s,function(n){var s=tu(n);if(!eG(s,a,i,o,!0)){var u=null,c=e;if("pointerType"in n){switch(n.pointerType){case"mouse":u=e7.Mouse;break;case"touch":u=e7.Touch;break;case"pen":u=e7.Pen}u===e7.Touch?e6[e]===e6.MouseDown?c="TouchStart":e6[e]===e6.MouseUp&&(c="TouchEnd"):e7.Pen}else e$(n)&&(u=e7.Touch);null!==u?(l=u,(c.startsWith("Touch")&&u===e7.Touch||c.startsWith("Mouse")&&u===e7.Mouse)&&(u=null)):e6[e]===e6.Click&&(u=l,l=null);var d=e$(n)?n.changedTouches[0]:n;if(d){var p=r.getId(s),f=d.clientX,h=d.clientY;ti(t)(en({type:e6[c],id:p,x:f,y:h},null!==u&&{pointerType:u}))}}},n))}),ti(function(){c.forEach(function(e){return e()})})}(e),P=tl(e),B=(n=e.viewportResizeCb,r=-1,a=-1,eZ("resize",ti(eH(ti(function(){var e=eJ(),t=eY();(r!==e||a!==t)&&(n({width:Number(t),height:Number(e)}),r=e,a=t)}),200)),t)),U=function(e){var t=e.inputCb,n=e.doc,r=e.mirror,a=e.blockClass,i=e.blockSelector,o=e.unblockSelector,s=e.ignoreClass,u=e.ignoreSelector,c=e.maskInputOptions,l=e.maskInputFn,d=e.sampling,p=e.userTriggeredOnInput,f=e.maskTextClass,h=e.unmaskTextClass,m=e.maskTextSelector,v=e.unmaskTextSelector;function y(e){var t=tu(e),r=e.isTrusted,d=t&&ey(t.tagName);if("OPTION"===d&&(t=t.parentElement),!(!t||!d||0>td.indexOf(d)||eG(t,a,i,o,!0))){var y=t;if(!(y.classList.contains(s)||u&&y.matches(u))){var k=ek(t),S=eS(y,d,k),b=!1,_=eh({maskInputOptions:c,tagName:d,type:k}),w=eP(t,f,m,h,v,_);("radio"===k||"checkbox"===k)&&(b=t.checked),S=em({isMasked:w,element:t,value:S,maskInputFn:l}),g(t,p?{text:S,isChecked:b,userTriggered:r}:{text:S,isChecked:b});var x=t.name;"radio"===k&&x&&b&&n.querySelectorAll('input[type="radio"][name="'.concat(x,'"]')).forEach(function(e){if(e!==t){var n=em({isMasked:w,element:e,value:eS(e,d,k),maskInputFn:l});g(e,p?{text:n,isChecked:!b,userTriggered:!1}:{text:n,isChecked:!b})}})}}}function g(e,n){var a=tp.get(e);if(!a||a.text!==n.text||a.isChecked!==n.isChecked){tp.set(e,n);var i=r.getId(e);ti(t)(en(en({},n),{},{id:i}))}}var k=("last"===d.input?["change"]:["input","change"]).map(function(e){return eZ(e,ti(y),n)}),S=n.defaultView;if(!S)return function(){k.forEach(function(e){return e()})};var b=S.Object.getOwnPropertyDescriptor(S.HTMLInputElement.prototype,"value"),_=[[S.HTMLInputElement.prototype,"value"],[S.HTMLInputElement.prototype,"checked"],[S.HTMLSelectElement.prototype,"value"],[S.HTMLTextAreaElement.prototype,"value"],[S.HTMLSelectElement.prototype,"selectedIndex"],[S.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&k.push.apply(k,(0,w.Z)(_.map(function(e){return function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,o=i.Object.getOwnPropertyDescriptor(t,n);return i.Object.defineProperty(t,n,a?r:{set:function(e){var t=this;setTimeout(function(){r.set.call(t,e)},0),o&&o.set&&o.set.call(this,e)}}),function(){return e(t,n,o||{},!0)}}(e[0],e[1],{set:function(){ti(y)({target:this,isTrusted:!1})}},!1,S)}))),ti(function(){k.forEach(function(e){return e()})})}(e),z=(i=e.mediaInteractionCb,o=e.blockClass,s=e.blockSelector,u=e.unblockSelector,c=e.mirror,l=e.sampling,d=e.doc,f=[eZ("play",(p=ti(function(e){return eH(ti(function(t){var n=tu(t);if(!(!n||eG(n,o,s,u,!0))){var r=n.currentTime,a=n.volume,l=n.muted,d=n.playbackRate;i({type:e,id:c.getId(n),currentTime:r,volume:a,muted:l,playbackRate:d})}}),l.media||500)}))(0),d),eZ("pause",p(1),d),eZ("seeked",p(2),d),eZ("volumechange",p(3),d),eZ("ratechange",p(4),d)],ti(function(){f.forEach(function(e){return e()})})),Z=function(e,t){var n,r,a=e.styleSheetRuleCb,i=e.mirror,o=e.stylesheetManager,s=t.win;if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return function(){};var u=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(u,{apply:ti(function(e,t,n){var r=(0,_.Z)(n,2),s=r[0],u=r[1],c=th(t,i,o.styleMirror),l=c.id,d=c.styleId;return(l&&-1!==l||d&&-1!==d)&&a({id:l,styleId:d,adds:[{rule:s,index:u}]}),e.apply(t,n)})});var c=s.CSSStyleSheet.prototype.deleteRule;s.CSSStyleSheet.prototype.deleteRule=new Proxy(c,{apply:ti(function(e,t,n){var r=(0,_.Z)(n,1)[0],s=th(t,i,o.styleMirror),u=s.id,c=s.styleId;return(u&&-1!==u||c&&-1!==c)&&a({id:u,styleId:c,removes:[{index:r}]}),e.apply(t,n)})}),s.CSSStyleSheet.prototype.replace&&(n=s.CSSStyleSheet.prototype.replace,s.CSSStyleSheet.prototype.replace=new Proxy(n,{apply:ti(function(e,t,n){var r=(0,_.Z)(n,1)[0],s=th(t,i,o.styleMirror),u=s.id,c=s.styleId;return(u&&-1!==u||c&&-1!==c)&&a({id:u,styleId:c,replace:r}),e.apply(t,n)})})),s.CSSStyleSheet.prototype.replaceSync&&(r=s.CSSStyleSheet.prototype.replaceSync,s.CSSStyleSheet.prototype.replaceSync=new Proxy(r,{apply:ti(function(e,t,n){var r=(0,_.Z)(n,1)[0],s=th(t,i,o.styleMirror),u=s.id,c=s.styleId;return(u&&-1!==u||c&&-1!==c)&&a({id:u,styleId:c,replaceSync:r}),e.apply(t,n)})}));var l={};tg("CSSGroupingRule")?l.CSSGroupingRule=s.CSSGroupingRule:(tg("CSSMediaRule")&&(l.CSSMediaRule=s.CSSMediaRule),tg("CSSConditionRule")&&(l.CSSConditionRule=s.CSSConditionRule),tg("CSSSupportsRule")&&(l.CSSSupportsRule=s.CSSSupportsRule));var d={};return Object.entries(l).forEach(function(e){var t=(0,_.Z)(e,2),n=t[0],r=t[1];d[n]={insertRule:r.prototype.insertRule,deleteRule:r.prototype.deleteRule},r.prototype.insertRule=new Proxy(d[n].insertRule,{apply:ti(function(e,t,n){var r=(0,_.Z)(n,2),s=r[0],u=r[1],c=th(t.parentStyleSheet,i,o.styleMirror),l=c.id,d=c.styleId;return(l&&-1!==l||d&&-1!==d)&&a({id:l,styleId:d,adds:[{rule:s,index:[].concat((0,w.Z)(tf(t)),[u||0])}]}),e.apply(t,n)})}),r.prototype.deleteRule=new Proxy(d[n].deleteRule,{apply:ti(function(e,t,n){var r=(0,_.Z)(n,1)[0],s=th(t.parentStyleSheet,i,o.styleMirror),u=s.id,c=s.styleId;return(u&&-1!==u||c&&-1!==c)&&a({id:u,styleId:c,removes:[{index:[].concat((0,w.Z)(tf(t)),[r])}]}),e.apply(t,n)})})}),ti(function(){s.CSSStyleSheet.prototype.insertRule=u,s.CSSStyleSheet.prototype.deleteRule=c,n&&(s.CSSStyleSheet.prototype.replace=n),r&&(s.CSSStyleSheet.prototype.replaceSync=r),Object.entries(l).forEach(function(e){var t=(0,_.Z)(e,2),n=t[0],r=t[1];r.prototype.insertRule=d[n].insertRule,r.prototype.deleteRule=d[n].deleteRule})})}(e,{win:t}),j=tm(e,e.doc),W=(h=e.styleDeclarationCb,m=e.mirror,v=e.ignoreCSSAttributes,y=e.stylesheetManager,g=t.CSSStyleDeclaration.prototype.setProperty,t.CSSStyleDeclaration.prototype.setProperty=new Proxy(g,{apply:ti(function(e,t,n){var r=(0,_.Z)(n,3),a=r[0],i=r[1],o=r[2];if(v.has(a))return g.apply(t,[a,i,o]);var s=th(to([t,"access",function(e){return e.parentRule},"optionalAccess",function(e){return e.parentStyleSheet}]),m,y.styleMirror),u=s.id,c=s.styleId;return(u&&-1!==u||c&&-1!==c)&&h({id:u,styleId:c,set:{property:a,value:i,priority:o},index:tf(t.parentRule)}),e.apply(t,n)})}),k=t.CSSStyleDeclaration.prototype.removeProperty,t.CSSStyleDeclaration.prototype.removeProperty=new Proxy(k,{apply:ti(function(e,t,n){var r=(0,_.Z)(n,1)[0];if(v.has(r))return k.apply(t,[r]);var a=th(to([t,"access",function(e){return e.parentRule},"optionalAccess",function(e){return e.parentStyleSheet}]),m,y.styleMirror),i=a.id,o=a.styleId;return(i&&-1!==i||o&&-1!==o)&&h({id:i,styleId:o,remove:{property:r},index:tf(t.parentRule)}),e.apply(t,n)})}),ti(function(){t.CSSStyleDeclaration.prototype.setProperty=g,t.CSSStyleDeclaration.prototype.removeProperty=k})),H=e.collectFonts?function(e){var t=e.fontCb,n=e.doc,r=n.defaultView;if(!r)return function(){};var a=[],i=new WeakMap,o=r.FontFace;r.FontFace=function(e,t,n){var r=new o(e,t,n);return i.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};var s=eq(n.fonts,"add",function(e){return function(n){return setTimeout(ti(function(){var e=i.get(n);e&&(t(e),i.delete(n))}),0),e.apply(this,[n])}});return a.push(function(){r.FontFace=o}),a.push(s),ti(function(){a.forEach(function(e){return e()})})}(e):function(){},q=(S=e.doc,b=e.mirror,x=e.blockClass,I=e.blockSelector,C=e.unblockSelector,E=e.selectionCb,T=!0,(M=ti(function(){var e=S.getSelection();if(!(!e||T&&to([e,"optionalAccess",function(e){return e.isCollapsed}]))){T=e.isCollapsed||!1;for(var t=[],n=e.rangeCount||0,r=0;r<n;r++){var a=e.getRangeAt(r),i=a.startContainer,o=a.startOffset,s=a.endContainer,u=a.endOffset;eG(i,x,I,C,!0)||eG(s,x,I,C,!0)||t.push({start:b.getId(i),startOffset:o,end:b.getId(s),endOffset:u})}E({ranges:t})}}))(),eZ("selectionchange",M)),K=(R=e.doc,A=e.customElementCb,(O=R.defaultView)&&O.customElements?eq(O.customElements,"define",function(e){return function(t,n,r){try{A({define:{name:t}})}catch(e){}return e.apply(this,[t,n,r])}}):function(){}),V=[],J=er(e.plugins);try{for(J.s();!(D=J.n()).done;){var Y=D.value;V.push(Y.observer(Y.callback,t,Y.options))}}catch(e){J.e(e)}finally{J.f()}return ti(function(){ts.forEach(function(e){return e.reset()}),L.disconnect(),N(),F(),P(),B(),U(),z(),Z(),j(),W(),H(),q(),K(),V.forEach(function(e){return e()})})}function ty(e){return void 0!==window[e]}function tg(e){return!!(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var tk=function(){function e(t){(0,I.Z)(this,e),this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}return(0,C.Z)(e,[{key:"getId",value:function(e,t,n,r){var a=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e),o=a.get(t);return o||(o=this.generateIdFn(),a.set(t,o),i.set(o,t)),o}},{key:"getIds",value:function(e,t){var n=this,r=this.getIdToRemoteIdMap(e),a=this.getRemoteIdToIdMap(e);return t.map(function(t){return n.getId(e,t,r,a)})}},{key:"getRemoteId",value:function(e,t,n){var r=n||this.getRemoteIdToIdMap(e);return"number"!=typeof t?t:r.get(t)||-1}},{key:"getRemoteIds",value:function(e,t){var n=this,r=this.getRemoteIdToIdMap(e);return t.map(function(t){return n.getRemoteId(e,t,r)})}},{key:"reset",value:function(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}},{key:"getIdToRemoteIdMap",value:function(e){var t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}},{key:"getRemoteIdToIdMap",value:function(e){var t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}]),e}();function tS(e){for(var t=void 0,n=e[0],r=1;r<e.length;){var a=e[r],i=e[r+1];if(r+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):("call"===a||"optionalCall"===a)&&(n=i(function(){for(var e,r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=n).call.apply(e,[t].concat(a))}),t=void 0)}return n}var tb=function(){function e(){(0,I.Z)(this,e),this.crossOriginIframeMirror=new tk(ew),this.crossOriginIframeRootIdMap=new WeakMap}return(0,C.Z)(e,[{key:"addIframe",value:function(){}},{key:"addLoadListener",value:function(){}},{key:"attachIframe",value:function(){}}]),e}(),t_=function(){function e(t){(0,I.Z)(this,e),this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new tk(ew),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new tk(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}return(0,C.Z)(e,[{key:"addIframe",value:function(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}},{key:"addLoadListener",value:function(e){this.loadListener=e}},{key:"attachIframe",value:function(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),tS([this,"access",function(e){return e.loadListener},"optionalCall",function(t){return t(e)}]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}},{key:"handleMessage",value:function(e){if("rrweb"===e.data.type&&e.origin===e.data.origin&&e.source){var t=this.crossOriginIframeMap.get(e.source);if(t){var n=this.transformCrossOriginEvent(t,e.data.event);n&&this.wrappedEmit(n,e.data.isCheckout)}}}},{key:"transformCrossOriginEvent",value:function(e,t){var n=this;switch(t.type){case e4.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);var r=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(t.data.node,r),{timestamp:t.timestamp,type:e4.IncrementalSnapshot,data:{source:e8.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case e4.Meta:case e4.Load:case e4.DomContentLoaded:break;case e4.Plugin:return t;case e4.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case e4.IncrementalSnapshot:switch(t.data.source){case e8.Mutation:return t.data.adds.forEach(function(t){n.replaceIds(t,e,["parentId","nextId","previousId"]),n.replaceIdOnNode(t.node,e);var r=n.crossOriginIframeRootIdMap.get(e);r&&n.patchRootIdOnNode(t.node,r)}),t.data.removes.forEach(function(t){n.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(function(t){n.replaceIds(t,e,["id"])}),t.data.texts.forEach(function(t){n.replaceIds(t,e,["id"])}),t;case e8.Drag:case e8.TouchMove:case e8.MouseMove:return t.data.positions.forEach(function(t){n.replaceIds(t,e,["id"])}),t;case e8.ViewportResize:return!1;case e8.MediaInteraction:case e8.MouseInteraction:case e8.Scroll:case e8.CanvasMutation:case e8.Input:return this.replaceIds(t.data,e,["id"]),t;case e8.StyleSheetRule:case e8.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case e8.Font:return t;case e8.Selection:return t.data.ranges.forEach(function(t){n.replaceIds(t,e,["start","end"])}),t;case e8.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),tS([t,"access",function(e){return e.data},"access",function(e){return e.styles},"optionalAccess",function(e){return e.forEach},"call",function(t){return t(function(t){n.replaceStyleIds(t,e,["styleId"])})}]),t}}return!1}},{key:"replace",value:function(e,t,n,r){var a,i=er(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]))}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"replaceIds",value:function(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}},{key:"replaceStyleIds",value:function(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}},{key:"replaceIdOnNode",value:function(e,t){var n=this;this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(function(e){n.replaceIdOnNode(e,t)})}},{key:"patchRootIdOnNode",value:function(e,t){var n=this;e.type===c.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(function(e){n.patchRootIdOnNode(e,t)})}}]),e}(),tw=function(){function e(){(0,I.Z)(this,e)}return(0,C.Z)(e,[{key:"init",value:function(){}},{key:"addShadowRoot",value:function(){}},{key:"observeAttachShadow",value:function(){}},{key:"reset",value:function(){}}]),e}(),tx=function(){function e(t){(0,I.Z)(this,e),this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}return(0,C.Z)(e,[{key:"init",value:function(){this.reset(),this.patchAttachShadow(Element,document)}},{key:"addShadowRoot",value:function(e,t){var n=this;if(el(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var r=tc(en(en({},this.bypassOptions),{},{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(function(){return r.disconnect()}),this.restoreHandlers.push(tl(en(en({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(function(){e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&n.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,n.mirror.getId(e.host)),n.restoreHandlers.push(tm({mirror:n.mirror,stylesheetManager:n.bypassOptions.stylesheetManager},e))},0)}}},{key:"observeAttachShadow",value:function(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}},{key:"patchAttachShadow",value:function(e,t){var n=this;this.restoreHandlers.push(eq(e.prototype,"attachShadow",function(e){return function(r){var a=e.call(this,r);return this.shadowRoot&&e5(this)&&n.addShadowRoot(this.shadowRoot,t),a}}))}},{key:"reset",value:function(){this.restoreHandlers.forEach(function(e){try{e()}catch(e){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}]),e}(),tI=function(){function e(){(0,I.Z)(this,e)}return(0,C.Z)(e,[{key:"reset",value:function(){}},{key:"freeze",value:function(){}},{key:"unfreeze",value:function(){}},{key:"lock",value:function(){}},{key:"unlock",value:function(){}},{key:"snapshot",value:function(){}}]),e}(),tC=function(){function e(t){(0,I.Z)(this,e),this.trackedLinkElements=new WeakSet,this.styleMirror=new e2,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}return(0,C.Z)(e,[{key:"attachLinkElement",value:function(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}},{key:"trackLinkElement",value:function(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}},{key:"adoptStyleSheets",value:function(e,t){if(0!==e.length){var n,r={id:t,styleIds:[]},a=[],i=er(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=void 0;this.styleMirror.has(o)?s=this.styleMirror.getId(o):(s=this.styleMirror.add(o),a.push({styleId:s,rules:Array.from(o.rules||CSSRule,function(e,t){return{rule:ep(e),index:t}})})),r.styleIds.push(s)}}catch(e){i.e(e)}finally{i.f()}a.length>0&&(r.styles=a),this.adoptedStyleSheetCb(r)}}},{key:"reset",value:function(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}},{key:"trackStylesheetInLinkElement",value:function(e){}}]),e}(),tE=function(){function e(){(0,I.Z)(this,e),this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}return(0,C.Z)(e,[{key:"periodicallyClear",value:function(){var e=this;!function(){(function(){if(p)return p;var e=window.document,t=window.requestAnimationFrame;if(e&&"function"==typeof e.createElement)try{var n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);var r=n.contentWindow;r&&r.requestAnimationFrame&&(t=r.requestAnimationFrame),e.head.removeChild(n)}catch(e){}return p=t.bind(window)})().apply(void 0,arguments)}(function(){e.clear(),e.loop&&e.periodicallyClear()})}},{key:"inOtherBuffer",value:function(e,t){var n=this.nodeMap.get(e);return n&&Array.from(n).some(function(e){return e!==t})}},{key:"add",value:function(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}},{key:"clear",value:function(){this.nodeMap=new WeakMap}},{key:"destroy",value:function(){this.loop=!1}}]),e}();function tT(e){return e.timestamp=eK(),e}var tM=new ef;function tR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.emit,n=e.checkoutEveryNms,r=e.checkoutEveryNth,a=e.blockClass,i=void 0===a?"rr-block":a,o=e.blockSelector,s=void 0===o?null:o,u=e.unblockSelector,c=void 0===u?null:u,l=e.ignoreClass,d=void 0===l?"rr-ignore":l,p=e.ignoreSelector,m=void 0===p?null:p,v=e.maskAllText,y=void 0!==v&&v,g=e.maskTextClass,k=void 0===g?"rr-mask":g,S=e.unmaskTextClass,b=void 0===S?null:S,_=e.maskTextSelector,w=void 0===_?null:_,x=e.unmaskTextSelector,I=void 0===x?null:x,C=e.inlineStylesheet,E=void 0===C||C,T=e.maskAllInputs,M=e.maskInputOptions,A=e.slimDOMOptions,O=e.maskAttributeFn,D=e.maskInputFn,L=e.maskTextFn,N=e.packFn,F=e.sampling,P=void 0===F?{}:F,B=e.dataURLOptions,U=void 0===B?{}:B,z=e.mousemoveWait,Z=e.recordCanvas,j=void 0!==Z&&Z,W=e.recordCrossOriginIframes,H=void 0!==W&&W,q=e.recordAfter,K=void 0===q?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":q,V=e.userTriggeredOnInput,J=void 0!==V&&V,Y=e.collectFonts,G=void 0!==Y&&Y,X=e.inlineImages,$=void 0!==X&&X,Q=e.plugins,ee=e.keepIframeSrcFn,et=void 0===ee?function(){return!1}:ee,ea=e.ignoreCSSAttributes,ei=void 0===ea?new Set([]):ea,eo=e.errorHandler,es=e.onMutation,eu=e.getCanvasManager;f=eo;var ec=!H||window.parent===window,el=!1;if(!ec)try{window.parent.document&&(el=!1)}catch(e){el=!0}if(ec&&!t)throw Error("emit function is required");void 0!==z&&void 0===P.mousemove&&(P.mousemove=z),tM.reset();var ed=!0===T?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==M?M:{},ep=!0===A||"all"===A?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===A,headMetaDescKeywords:"all"===A}:A||{};!function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(!(0 in n))throw TypeError("1 argument is required");do if(e===a)return!0;while(a=a&&a.parentNode);return!1})}();var eh,em,ev=0,ey=function(e){var t,n=er(Q||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.eventProcessor&&(e=r.eventProcessor(e))}}catch(e){n.e(e)}finally{n.f()}return N&&!el&&(e=N(e)),e},eg=function(e,a){if((0,R.x)([ts,"access",function(e){return e[0]},"optionalAccess",function(e){return e.isFrozen},"call",function(e){return e()}])&&e.type!==e4.FullSnapshot&&!(e.type===e4.IncrementalSnapshot&&e.data.source===e8.Mutation)&&ts.forEach(function(e){return e.unfreeze()}),ec)(0,R.x)([t,"optionalCall",function(t){return t(ey(e),a)}]);else if(el){var i={type:"rrweb",event:ey(e),origin:window.location.origin,isCheckout:a};window.parent.postMessage(i,"*")}if(e.type===e4.FullSnapshot)eh=e,ev=0;else if(e.type===e4.IncrementalSnapshot){if(e.data.source===e8.Mutation&&e.data.isAttachIframe)return;ev++;var o=r&&ev>=r,s=n&&e.timestamp-eh.timestamp>n;(o||s)&&eM(!0)}},ek=function(e){eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.Mutation},e)}))},eS=function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.Scroll},e)}))},eb=function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.CanvasMutation},e)}))},e_=new tC({mutationCb:ek,adoptedStyleSheetCb:function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.AdoptedStyleSheet},e)}))}}),ew="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new tb:new t_({mirror:tM,mutationCb:ek,stylesheetManager:e_,recordCrossOriginIframes:H,wrappedEmit:eg}),ex=er(Q||[]);try{for(ex.s();!(em=ex.n()).done;){var eI=em.value;eI.getMirror&&eI.getMirror({nodeMirror:tM,crossOriginIframeMirror:ew.crossOriginIframeMirror,crossOriginIframeStyleMirror:ew.crossOriginIframeStyleMirror})}}catch(e){ex.e(e)}finally{ex.f()}var eC=new tE,eE=function(e,t){try{return e?e(t):new tI}catch(e){return console.warn("Unable to initialize CanvasManager"),new tI}}(eu,{mirror:tM,win:window,mutationCb:function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.CanvasMutation},e)}))},recordCanvas:j,blockClass:i,blockSelector:s,unblockSelector:c,sampling:P.canvas,dataURLOptions:U,errorHandler:eo}),eT="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new tw:new tx({mutationCb:ek,scrollCb:eS,bypassOptions:{onMutation:es,blockClass:i,blockSelector:s,unblockSelector:c,maskAllText:y,maskTextClass:k,unmaskTextClass:b,maskTextSelector:w,unmaskTextSelector:I,inlineStylesheet:E,maskInputOptions:ed,dataURLOptions:U,maskAttributeFn:O,maskTextFn:L,maskInputFn:D,recordCanvas:j,inlineImages:$,sampling:P,slimDOMOptions:ep,iframeManager:ew,stylesheetManager:e_,canvasManager:eE,keepIframeSrcFn:et,processedNodeManager:eC},mirror:tM}),eM=function(){var e,t,n,r,a,o,u,l,d,p,f,h,m,v,g,S,_,x,C,T,M,R,A,N,F,P,B,z,Z=arguments.length>0&&void 0!==arguments[0]&&arguments[0];eg(tT({type:e4.Meta,data:{href:window.location.href,width:eY(),height:eJ()}}),Z),e_.reset(),eT.init(),ts.forEach(function(e){return e.lock()});var W=(e=document,r=void 0===(n=(t={mirror:tM,blockClass:i,blockSelector:s,unblockSelector:c,maskAllText:y,maskTextClass:k,unmaskTextClass:b,maskTextSelector:w,unmaskTextSelector:I,inlineStylesheet:E,maskAllInputs:ed,maskAttributeFn:O,maskInputFn:D,maskTextFn:L,slimDOM:ep,dataURLOptions:U,recordCanvas:j,inlineImages:$,onSerialize:function(e){eQ(e,tM)&&ew.addIframe(e),e0(e,tM)&&e_.trackLinkElement(e),e1(e)&&eT.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){ew.attachIframe(e,t),eT.observeAttachShadow(e)},onStylesheetLoad:function(e,t){e_.attachLinkElement(e,t)},keepIframeSrcFn:et}).mirror)?new ef:n,a=t.blockClass,o=t.blockSelector,u=t.unblockSelector,l=t.maskAllText,d=t.maskTextClass,p=t.unmaskTextClass,f=t.maskTextSelector,h=t.unmaskTextSelector,m=t.inlineStylesheet,v=t.inlineImages,g=t.recordCanvas,_=void 0!==(S=t.maskAllInputs)&&S,x=t.maskAttributeFn,C=t.maskTextFn,T=t.maskInputFn,R=void 0!==(M=t.slimDOM)&&M,A=t.dataURLOptions,N=t.preserveWhiteSpace,F=t.onSerialize,P=t.onIframeLoad,B=t.iframeLoadTimeout,eU(e,{doc:e,mirror:r,blockClass:void 0===a?"rr-block":a,blockSelector:void 0===o?null:o,unblockSelector:void 0===u?null:u,maskAllText:void 0!==l&&l,maskTextClass:void 0===d?"rr-mask":d,unmaskTextClass:void 0===p?null:p,maskTextSelector:void 0===f?null:f,unmaskTextSelector:void 0===h?null:h,skipChild:!1,inlineStylesheet:void 0===m||m,maskInputOptions:!0===_?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===_?{}:_,maskAttributeFn:x,maskTextFn:C,maskInputFn:T,slimDOMOptions:!0===R||"all"===R?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===R,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===R?{}:R,dataURLOptions:A,inlineImages:void 0!==v&&v,recordCanvas:void 0!==g&&g,preserveWhiteSpace:N,onSerialize:F,onIframeLoad:P,iframeLoadTimeout:B,onStylesheetLoad:t.onStylesheetLoad,stylesheetLoadTimeout:t.stylesheetLoadTimeout,keepIframeSrcFn:void 0===(z=t.keepIframeSrcFn)?function(){return!1}:z,newlyAddedElement:!1}));if(!W)return console.warn("Failed to snapshot the document");eg(tT({type:e4.FullSnapshot,data:{node:W,initialOffset:eV(window)}})),ts.forEach(function(e){return e.unlock()}),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&e_.adoptStyleSheets(document.adoptedStyleSheets,tM.getId(document))};h=eM;try{var eR=[],eA=function(e){return ti(tv)({onMutation:es,mutationCb:ek,mousemoveCb:function(e,t){return eg(tT({type:e4.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.MouseInteraction},e)}))},scrollCb:eS,viewportResizeCb:function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.ViewportResize},e)}))},inputCb:function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.Input},e)}))},mediaInteractionCb:function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.StyleDeclaration},e)}))},canvasMutationCb:eb,fontCb:function(e){return eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.Font},e)}))},selectionCb:function(e){eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.Selection},e)}))},customElementCb:function(e){eg(tT({type:e4.IncrementalSnapshot,data:en({source:e8.CustomElement},e)}))},blockClass:i,ignoreClass:d,ignoreSelector:m,maskAllText:y,maskTextClass:k,unmaskTextClass:b,maskTextSelector:w,unmaskTextSelector:I,maskInputOptions:ed,inlineStylesheet:E,sampling:P,recordCanvas:j,inlineImages:$,userTriggeredOnInput:J,collectFonts:G,doc:e,maskAttributeFn:O,maskInputFn:D,maskTextFn:L,keepIframeSrcFn:et,blockSelector:s,unblockSelector:c,slimDOMOptions:ep,dataURLOptions:U,mirror:tM,iframeManager:ew,stylesheetManager:e_,shadowDomManager:eT,processedNodeManager:eC,canvasManager:eE,ignoreCSSAttributes:ei,plugins:(0,R.x)([Q,"optionalAccess",function(e){return e.filter},"call",function(e){return e(function(e){return e.observer})},"optionalAccess",function(e){return e.map},"call",function(e){return e(function(e){return{observer:e.observer,options:e.options,callback:function(t){return eg(tT({type:e4.Plugin,data:{plugin:e.name,payload:t}}))}}})}])||[]},{})};ew.addLoadListener(function(e){try{eR.push(eA(e.contentDocument))}catch(e){console.warn(e)}});var eO=function(){eM(),eR.push(eA(document))};return"interactive"===document.readyState||"complete"===document.readyState?eO():(eR.push(eZ("DOMContentLoaded",function(){eg(tT({type:e4.DomContentLoaded,data:{}})),"DOMContentLoaded"===K&&eO()})),eR.push(eZ("load",function(){eg(tT({type:e4.Load,data:{}})),"load"===K&&eO()},window))),function(){eR.forEach(function(e){return e()}),eC.destroy(),h=void 0,f=void 0}}catch(e){console.warn(e)}}function tA(e){return e>9999999999?e:1e3*e}function tO(e){return e>9999999999?e/1e3:e}function tD(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(function(){return e.throttledAddEvent({type:e4.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:(0,U.Fv)(t,10,1e3)}}),"console"===t.category}))}function tL(e){return e.closest("button,a")||e}function tN(e){var t=tF(e);return t&&t instanceof Element?tL(t):t}function tF(e){return"object"==typeof e&&e&&"target"in e?e.target:e}tR.mirror=tM,tR.takeFullSnapshot=function(e){if(!h)throw Error("please take full snapshot after start recording");h(e)};var tP=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tD;(0,I.Z)(this,e),this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}return(0,C.Z)(e,[{key:"addListeners",value:function(){var e,t=this,n=(e=function(){t._lastMutation=tU()},m||(m=[],(0,z.hl)(ei,"open",function(e){return function(){if(m)try{m.forEach(function(e){return e()})}catch(e){}for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ei,n)}})),m.push(e),function(){var t=m?m.indexOf(e):-1;t>-1&&m.splice(t,1)});this._teardown=function(){n(),t._clicks=[],t._lastMutation=0,t._lastScroll=0}}},{key:"removeListeners",value:function(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}},{key:"handleClick",value:function(e,t){if(n=this._ignoreSelector,!(!tB.includes(t.tagName)||"INPUT"===t.tagName&&!["submit","button"].includes(t.getAttribute("type")||"")||"A"===t.tagName&&(t.hasAttribute("download")||t.hasAttribute("target")&&"_self"!==t.getAttribute("target"))||n&&t.matches(n))&&e.data&&"number"==typeof e.data.nodeId&&e.timestamp){var n,r={timestamp:tO(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some(function(e){return e.node===r.node&&1>Math.abs(e.timestamp-r.timestamp)})||(this._clicks.push(r),1===this._clicks.length&&this._scheduleCheckClicks())}}},{key:"registerMutation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastMutation=tO(e)}},{key:"registerScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastScroll=tO(e)}},{key:"registerClick",value:function(e){var t=tL(e);this._handleMultiClick(t)}},{key:"_handleMultiClick",value:function(e){this._getClicks(e).forEach(function(e){e.clickCount++})}},{key:"_getClicks",value:function(e){return this._clicks.filter(function(t){return t.node===e})}},{key:"_checkClicks",value:function(){var e=this,t=[],n=tU();this._clicks.forEach(function(r){!r.mutationAfter&&e._lastMutation&&(r.mutationAfter=r.timestamp<=e._lastMutation?e._lastMutation-r.timestamp:void 0),!r.scrollAfter&&e._lastScroll&&(r.scrollAfter=r.timestamp<=e._lastScroll?e._lastScroll-r.timestamp:void 0),r.timestamp+e._timeout<=n&&t.push(r)});for(var r=0;r<t.length;r++){var a=t[r],i=this._clicks.indexOf(a);i>-1&&(this._generateBreadcrumbs(a),this._clicks.splice(i,1))}this._clicks.length&&this._scheduleCheckClicks()}},{key:"_generateBreadcrumbs",value:function(e){var t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,a=e.clickCount,i=e.clickBreadcrumb;if(!n&&!r){var o=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),s=o<1e3*this._timeout?"mutation":"timeout",u={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:en(en({},i.data),{},{url:ei.location.href,route:t.getCurrentRoute(),timeAfterClickMs:o,endReason:s,clickCount:a||1})};this._addBreadcrumbEvent(t,u);return}if(a>1){var c={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:en(en({},i.data),{},{url:ei.location.href,route:t.getCurrentRoute(),clickCount:a,metric:!0})};this._addBreadcrumbEvent(t,c)}}},{key:"_scheduleCheckClicks",value:function(){var e=this;this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(function(){return e._checkClicks()},1e3)}}]),e}(),tB=["A","BUTTON","INPUT"];function tU(){return Date.now()/1e3}function tz(e){return en({timestamp:Date.now()/1e3,type:"default"},e)}(u=v||(v={}))[u.Document=0]="Document",u[u.DocumentType=1]="DocumentType",u[u.Element=2]="Element",u[u.Text=3]="Text",u[u.CDATA=4]="CDATA",u[u.Comment=5]="Comment";var tZ=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function tj(e,t){var n=tR.mirror.getId(e),r=n&&tR.mirror.getNode(n),a=r&&tR.mirror.getMeta(r),i=a&&a.type===v.Element?a:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(function(e){return e.type===v.Text&&e.textContent}).filter(Boolean).map(function(e){return e.trim()}).join(""),attributes:function(e){var t={};for(var n in e)if(tZ.has(n)){var r=n;("data-testid"===n||"data-test-id"===n)&&(r="testId"),t[r]=e[n]}return t}(i.attributes)}}:{}}}var tW={resource:function(e){var t=e.entryType,n=e.initiatorType,r=e.name,a=e.responseEnd,i=e.startTime,o=e.decodedBodySize,s=e.encodedBodySize,u=e.responseStatus,c=e.transferSize;return["fetch","xmlhttprequest"].includes(n)?null:{type:"".concat(t,".").concat(n),start:tq(i),end:tq(a),name:r,data:{size:c,statusCode:u,decodedBodySize:o,encodedBodySize:s}}},paint:function(e){var t=e.duration,n=e.entryType,r=e.name,a=tq(e.startTime);return{type:n,name:r,start:a,end:a+t,data:void 0}},navigation:function(e){var t=e.entryType,n=e.name,r=e.decodedBodySize,a=e.duration,i=e.domComplete,o=e.encodedBodySize,s=e.domContentLoadedEventStart,u=e.domContentLoadedEventEnd,c=e.domInteractive,l=e.loadEventStart,d=e.loadEventEnd,p=e.redirectCount,f=e.startTime,h=e.transferSize,m=e.type;return 0===a?null:{type:"".concat(t,".").concat(m),start:tq(f),end:tq(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:o,duration:a,domInteractive:c,domContentLoadedEventStart:s,domContentLoadedEventEnd:u,loadEventStart:l,loadEventEnd:d,domComplete:i,redirectCount:p}}}};function tH(e){return tW[e.entryType]?tW[e.entryType](e):null}function tq(e){return((j.Z1||ei.performance.timeOrigin)+e)/1e3}var tK=function(e){(0,g.Z)(n,e);var t=ee(n);function n(){return(0,I.Z)(this,n),t.call(this,"Event buffer exceeded maximum size of ".concat(2e7,"."))}return(0,C.Z)(n)}((0,b.Z)(Error)),tV=function(){var e;function t(){(0,I.Z)(this,t),this.events=[],this._totalSize=0,this.hasCheckout=!1}return(0,C.Z)(t,[{key:"hasEvents",get:function(){return this.events.length>0}},{key:"type",get:function(){return"sync"}},{key:"destroy",value:function(){this.events=[]}},{key:"addEvent",value:(e=(0,y.Z)(T().mark(function e(t){var n;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=JSON.stringify(t).length,this._totalSize+=n,!(this._totalSize>2e7)){e.next=4;break}throw new tK;case 4:this.events.push(t);case 5:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"finish",value:function(){var e=this;return new Promise(function(t){var n=e.events;e.clear(),t(JSON.stringify(n))})}},{key:"clear",value:function(){this.events=[],this._totalSize=0,this.hasCheckout=!1}},{key:"getEarliestTimestamp",value:function(){var e=this.events.map(function(e){return e.timestamp}).sort()[0];return e?tA(e):null}}]),t}(),tJ=function(){function e(t){(0,I.Z)(this,e),this._worker=t,this._id=0}return(0,C.Z)(e,[{key:"ensureReady",value:function(){var e=this;return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(function(t,n){e._worker.addEventListener("message",function(e){e.data.success?t():n()},{once:!0}),e._worker.addEventListener("error",function(e){n(e)},{once:!0})})),this._ensureReadyPromise}},{key:"destroy",value:function(){this._worker.terminate()}},{key:"postMessage",value:function(e,t){var n=this,r=this._getAndIncrementId();return new Promise(function(a,i){n._worker.addEventListener("message",function t(o){var s=o.data;if(s.method===e&&s.id===r){if(n._worker.removeEventListener("message",t),!s.success){i(Error("Error in compression worker"));return}a(s.response)}}),n._worker.postMessage({id:r,method:e,arg:t})})}},{key:"_getAndIncrementId",value:function(){return this._id++}}]),e}(),tY=function(){var e;function t(e){(0,I.Z)(this,t),this._worker=new tJ(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}return(0,C.Z)(t,[{key:"hasEvents",get:function(){return!!this._earliestTimestamp}},{key:"type",get:function(){return"worker"}},{key:"ensureReady",value:function(){return this._worker.ensureReady()}},{key:"destroy",value:function(){this._worker.destroy()}},{key:"addEvent",value:function(e){var t=tA(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);var n=JSON.stringify(e);return(this._totalSize+=n.length,this._totalSize>2e7)?Promise.reject(new tK):this._sendEventToWorker(n)}},{key:"finish",value:function(){return this._finishRequest()}},{key:"clear",value:function(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,function(e){})}},{key:"getEarliestTimestamp",value:function(){return this._earliestTimestamp}},{key:"_sendEventToWorker",value:function(e){return this._worker.postMessage("addEvent",e)}},{key:"_finishRequest",value:(e=(0,y.Z)(T().mark(function e(){var t;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._worker.postMessage("finish");case 2:return t=e.sent,this._earliestTimestamp=null,this._totalSize=0,e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})}]),t}(),tG=function(){var e,t,n;function r(e){(0,I.Z)(this,r),this._fallback=new tV,this._compression=new tY(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}return(0,C.Z)(r,[{key:"type",get:function(){return this._used.type}},{key:"hasEvents",get:function(){return this._used.hasEvents}},{key:"hasCheckout",get:function(){return this._used.hasCheckout},set:function(e){this._used.hasCheckout=e}},{key:"destroy",value:function(){this._fallback.destroy(),this._compression.destroy()}},{key:"clear",value:function(){return this._used.clear()}},{key:"getEarliestTimestamp",value:function(){return this._used.getEarliestTimestamp()}},{key:"addEvent",value:function(e){return this._used.addEvent(e)}},{key:"finish",value:(e=(0,y.Z)(T().mark(function e(){return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureWorkerIsLoaded();case 2:return e.abrupt("return",this._used.finish());case 3:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"ensureWorkerIsLoaded",value:function(){return this._ensureWorkerIsLoadedPromise}},{key:"_ensureWorkerIsLoaded",value:(t=(0,y.Z)(T().mark(function e(){return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._compression.ensureReady();case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 9:return e.next=11,this._switchToCompressionWorker();case 11:case"end":return e.stop()}},e,this,[[0,5]])})),function(){return t.apply(this,arguments)})},{key:"_switchToCompressionWorker",value:(n=(0,y.Z)(T().mark(function e(){var t,n,r,a,i,o,s;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(t=this._fallback).events,r=t.hasCheckout,a=[],i=er(n);try{for(i.s();!(o=i.n()).done;)s=o.value,a.push(this._compression.addEvent(s))}catch(e){i.e(e)}finally{i.f()}return this._compression.hasCheckout=r,this._used=this._compression,e.prev=6,e.next=9,Promise.all(a);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6);case 14:case"end":return e.stop()}},e,this,[[6,11]])})),function(){return n.apply(this,arguments)})}]),r}();function tX(){try{return"sessionStorage"in ei&&!!ei.sessionStorage}catch(e){return!1}}function t$(e){return void 0!==e&&Math.random()<e}function tQ(e){var t=Date.now();return{id:e.id||(0,H.DM)(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function t0(e){if(tX())try{ei.sessionStorage.setItem(eo,JSON.stringify(e))}catch(e){}}function t1(e){var t=e.sessionSampleRate,n=e.allowBuffering,r=e.stickySession,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.previousSessionId,o=tQ({sampled:t$(t)?"session":!!n&&"buffer",previousSessionId:i});return void 0!==r&&r&&t0(o),o}function t2(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:+new Date;return null===e||void 0===t||t<0||0!==t&&e+t<=n}function t3(e,t){var n=t.maxReplayDuration,r=t.sessionIdleExpire,a=t.targetTime,i=void 0===a?Date.now():a;return t2(e.started,n,i)||t2(e.lastActivity,r,i)}function t5(e,t){return!!t3(e,{sessionIdleExpire:t.sessionIdleExpire,maxReplayDuration:t.maxReplayDuration})&&("buffer"!==e.sampled||0!==e.segmentId)}function t4(e,t){var n=e.traceInternals,r=e.sessionIdleExpire,a=e.maxReplayDuration,i=e.previousSessionId,o=t.stickySession&&function(e){if(!tX())return null;try{var t=ei.sessionStorage.getItem(eo);if(!t)return null;var n=JSON.parse(t);return tQ(n)}catch(e){return null}}(0);return o?t5(o,{sessionIdleExpire:r,maxReplayDuration:a})?t1(t,{previousSessionId:o.id}):o:t1(t,{previousSessionId:i})}function t8(e,t,n){return!!t9(e,t)&&(t6(e,t,n),!0)}function t6(e,t,n){return t7.apply(this,arguments)}function t7(){return(t7=(0,y.Z)(T().mark(function e(t,n,r){var a,i,o;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.eventBuffer){e.next=2;break}return e.abrupt("return",null);case 2:if(e.prev=2,r&&"buffer"===t.recordingMode&&t.eventBuffer.clear(),r&&(t.eventBuffer.hasCheckout=!0),a=function(e,t){try{if("function"==typeof t&&e.type===e4.Custom)return t(e)}catch(e){return null}return e}(n,t.getOptions().beforeAddRecordingEvent)){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,t.eventBuffer.addEvent(a);case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(2),i=e.t0&&e.t0 instanceof tK?"addEventSizeExceeded":"addEvent",e.next=20,t.stop({reason:i});case 20:(o=(0,A.s3)())&&o.recordDroppedEvent("internal_sdk_error","replay");case 22:case"end":return e.stop()}},e,null,[[2,14]])}))).apply(this,arguments)}function t9(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;var n=tA(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(e.getOptions()._experiments.traceInternals,!1))}function ne(e){return"transaction"===e.type}function nt(e){return"feedback"===e.type}function nn(e){var t=function(){var e=(0,A.s3)();if(!e)return!1;var t=e.getTransport();return!!t&&(t.send.__sentry__baseTransport__||!1)}();return function(n,r){if(e.isEnabled()&&(!n.type||ne(n))){var a,i=r&&r.statusCode;if(!t||i&&!(i<200)&&!(i>=300)){if(ne(n)){a=e.getContext(),n.contexts&&n.contexts.trace&&n.contexts.trace.trace_id&&a.traceIds.size<100&&a.traceIds.add(n.contexts.trace.trace_id);return}!function(e,t){var n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),"buffer"===e.recordingMode&&t.tags&&t.tags.replayId){var r=e.getOptions().beforeErrorSampling;("function"!=typeof r||r(t))&&setTimeout(function(){e.sendBufferedReplayOrFlush()})}}(e,n)}}}}function nr(e,t){return t.map(function(t){var n=t.type,r=t.start,a=t.end,i=t.name,o=t.data,s=e.throttledAddEvent({type:e4.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:a,data:o}}});return"string"==typeof s?Promise.resolve(null):s})}function na(e,t){var n;e.isEnabled()&&null!==t&&(n=t.name,(0,O.W)(n,(0,A.s3)())||e.addUpdate(function(){return nr(e,[t]),!0}))}function ni(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){var n=nf(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function no(e){if(e){var t=parseInt(e,10);return isNaN(t)?void 0:t}}function ns(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[nf(e)];if(!e)return[void 0]}catch(e){return[void 0,"BODY_PARSE_ERROR"]}return[void 0,"UNPARSEABLE_BODY_TYPE"]}function nu(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};var n=en({},e._meta),r=n.warnings||[];return n.warnings=[].concat((0,w.Z)(r),[t]),e._meta=n,e}function nc(e,t){if(!t)return null;var n=t.startTimestamp,r=t.endTimestamp,a=t.url,i=t.method,o=t.statusCode,s=t.request,u=t.response;return{type:e,start:n/1e3,end:r/1e3,name:a,data:(0,z.Jr)({method:i,statusCode:o,request:s,response:u})}}function nl(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function nd(e,t,n){if(t||0!==Object.keys(e).length){if(!t)return{headers:e};if(!n)return{headers:e,size:t};var r={headers:e,size:t},a=function(e){if(!e||"string"!=typeof e)return{body:e};var t,n,r=e.length>15e4,a=(t=e[0],n=e[e.length-1],"["===t&&"]"===n||"{"===t&&"}"===n);if(r){var i=e.slice(0,15e4);return a?{body:i,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:"".concat(i,""),warnings:["TEXT_TRUNCATED"]}}if(a)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n),i=a.body,o=a.warnings;return r.body=i,o&&o.length>0&&(r._meta={warnings:o}),r}}function np(e,t){return Object.keys(e).reduce(function(n,r){var a=r.toLowerCase();return t.includes(a)&&e[r]&&(n[a]=e[r]),n},{})}function nf(e){return new URLSearchParams(e).toString()}function nh(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei.document.baseURI;if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(ei.location.origin))return e;var n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;var r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}(e);return(0,K.U0)(n,t)}function nm(){return(nm=(0,y.Z)(T().mark(function e(t,n,r){var a;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t,n){return nv.apply(this,arguments)}(t,n,r);case 3:a=nc("resource.fetch",e.sent),na(r.replay,a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function nv(){return(nv=(0,y.Z)(T().mark(function e(t,n,r){var a,i,o,s,u,c,l,d,p,f,h,m,v,y,g;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),o=void 0===(i=n.startTimestamp)?a:i,u=void 0===(s=n.endTimestamp)?a:s,l=(c=t.data).url,d=c.method,f=void 0===(p=c.status_code)?0:p,h=c.request_body_size,m=c.response_body_size,y=(v=nh(l,r.networkDetailAllowUrls)&&!nh(l,r.networkDetailDenyUrls))?function(e,t,n){var r=e.networkCaptureBodies,a=e.networkRequestHeaders,i=t?1===t.length&&"string"!=typeof t[0]?nb(t[0],a):2===t.length?nb(t[1],a):{}:{};if(!r)return nd(i,n,void 0);var o=ns(nk(t)),s=(0,_.Z)(o,2),u=s[0],c=s[1],l=nd(i,n,u);return c?nu(l,c):l}(r,n.input,h):nl(h),e.next=7,function(e,t,n,r){return ny.apply(this,arguments)}(v,r,n.response,m);case 7:return g=e.sent,e.abrupt("return",{startTimestamp:o,endTimestamp:u,url:l,method:d,statusCode:f,request:y,response:g});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ny(){return(ny=(0,y.Z)(T().mark(function e(t,n,r,a){var i,o,s,u,c,l,d,p,f;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.networkCaptureBodies,o=n.textEncoder,s=n.networkResponseHeaders,!(!t&&void 0!==a)){e.next=3;break}return e.abrupt("return",nl(a));case 3:if(u=r?nS(r.headers,s):{},!(!r||!i&&void 0!==a)){e.next=6;break}return e.abrupt("return",nd(u,a,void 0));case 6:return e.next=8,function(e){return ng.apply(this,arguments)}(r);case 8:if(c=e.sent,d=(l=(0,_.Z)(c,2))[0],p=l[1],f=function(e,t){var n=t.networkCaptureBodies,r=t.textEncoder,a=t.responseBodySize,i=t.captureDetails,o=t.headers;try{var s=e&&e.length&&void 0===a?ni(e,r):a;if(!i)return nl(s);if(n)return nd(o,s,e);return nd(o,s,void 0)}catch(e){return nd(o,a,void 0)}}(d,{networkCaptureBodies:i,textEncoder:o,responseBodySize:a,captureDetails:t,headers:u}),!p){e.next=15;break}return e.abrupt("return",nu(f,p));case 15:return e.abrupt("return",f);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ng(){return(ng=(0,y.Z)(T().mark(function e(t){var n,r;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){try{return e.clone()}catch(e){}}(t)){e.next=3;break}return e.abrupt("return",[void 0,"BODY_PARSE_ERROR"]);case 3:return e.prev=3,e.next=6,function(e){return new Promise(function(t,n){var r=setTimeout(function(){return n(Error("Timeout while trying to read response body"))},500);(function(e){return n_.apply(this,arguments)})(e).then(function(e){return t(e)},function(e){return n(e)}).finally(function(){return clearTimeout(r)})})}(n);case 6:return r=e.sent,e.abrupt("return",[r]);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",[void 0,"BODY_PARSE_ERROR"]);case 14:case"end":return e.stop()}},e,null,[[3,10]])}))).apply(this,arguments)}function nk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(2===e.length&&"object"==typeof e[1])return e[1].body}function nS(e,t){var n={};return t.forEach(function(t){e.get(t)&&(n[t]=e.get(t))}),n}function nb(e,t){if(!e)return{};var n=e.headers;return n?n instanceof Headers?nS(n,t):Array.isArray(n)?{}:np(n,t):{}}function n_(){return(n_=(0,y.Z)(T().mark(function e(t){return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nw(){return(nw=(0,y.Z)(T().mark(function e(t,n,r){var a,i;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{a=function(e,t,n){var r=Date.now(),a=t.startTimestamp,i=void 0===a?r:a,o=t.endTimestamp,s=void 0===o?r:o,u=t.input,c=t.xhr,l=e.data,d=l.url,p=l.method,f=l.status_code,h=void 0===f?0:f,m=l.request_body_size,v=l.response_body_size;if(!d)return null;if(!c||!nh(d,n.networkDetailAllowUrls)||nh(d,n.networkDetailDenyUrls))return{startTimestamp:i,endTimestamp:s,url:d,method:p,statusCode:h,request:nl(m),response:nl(v)};var y=c[q.xU],g=y?np(y.request_headers,n.networkRequestHeaders):{},k=np(function(e){var t=e.getAllResponseHeaders();return t?t.split("\r\n").reduce(function(e,t){var n=t.split(": "),r=(0,_.Z)(n,2),a=r[0],i=r[1];return e[a.toLowerCase()]=i,e},{}):{}}(c),n.networkResponseHeaders),S=n.networkCaptureBodies?ns(u):[void 0],b=(0,_.Z)(S,2),w=b[0],x=b[1],I=n.networkCaptureBodies?function(e){var t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(e){return[void 0,"BODY_PARSE_ERROR"]}return[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return[void 0]}(c):[void 0],C=(0,_.Z)(I,2),E=C[0],T=C[1],M=nd(g,m,w),R=nd(k,v,E);return{startTimestamp:i,endTimestamp:s,url:d,method:p,statusCode:h,request:x?nu(M,x):M,response:T?nu(R,T):R}}(t,n,r),i=nc("resource.xhr",a),na(r.replay,i)}catch(e){}case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var nx=null;function nI(){return(nI=(0,y.Z)(T().mark(function e(t){return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",Promise.all(nr(t,[function(e){var t=e.jsHeapSizeLimit,n=e.totalJSHeapSize,r=e.usedJSHeapSize,a=Date.now()/1e3;return{type:"memory",name:"memory",start:a,end:a,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}(ei.performance.memory)])));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",[]);case 7:case"end":return e.stop()}},e,null,[[0,4]])}))).apply(this,arguments)}function nC(){return(nC=(0,y.Z)(T().mark(function e(t){var n,r,a,i,o,s,u,c,l,d;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.scope,a=t.replayId,i=t.event,o={event_id:a,integrations:"object"!=typeof n._integrations||null===n._integrations||Array.isArray(n._integrations)?void 0:Object.keys(n._integrations)},n.emit&&n.emit("preprocessEvent",i,o),e.next=6,(0,L.R)(n.getOptions(),i,o,r,n,(0,N.aF)());case 6:if(s=e.sent){e.next=9;break}return e.abrupt("return",null);case 9:return s.platform=s.platform||"javascript",l=(c=(u=n.getSdkMetadata&&n.getSdkMetadata())&&u.sdk||{}).name,d=c.version,s.sdk=en(en({},s.sdk),{},{name:l||"sentry.javascript.unknown",version:d||"0.0.0"}),e.abrupt("return",s);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nE(){return(nE=(0,y.Z)(T().mark(function e(t){var n,r,a,i,o,s,u,c,l,d,p,f,h,m,v,y,g,k,S,b,_;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.recordingData,r=t.replayId,a=t.segmentId,i=t.eventContext,o=t.timestamp,s=t.session,u=function(e){var t,n=e.recordingData,r=e.headers,a="".concat(JSON.stringify(r),"\n");if("string"==typeof n)t="".concat(a).concat(n);else{var i=new TextEncoder().encode(a);(t=new Uint8Array(i.length+n.length)).set(i),t.set(n,i.length)}return t}({recordingData:n,headers:{segment_id:a}}),c=i.urls,l=i.errorIds,d=i.traceIds,p=i.initialTimestamp,f=(0,A.s3)(),h=(0,A.nZ)(),m=f&&f.getTransport(),v=f&&f.getDsn(),!(!f||!m||!v||!s.sampled)){e.next=9;break}return e.abrupt("return");case 9:return y={type:"replay_event",replay_start_timestamp:p/1e3,timestamp:o/1e3,error_ids:l,trace_ids:d,urls:c,replay_id:r,segment_id:a,replay_type:s.sampled},e.next=12,function(e){return nC.apply(this,arguments)}({scope:h,client:f,replayId:r,event:y});case 12:if(g=e.sent){e.next=17;break}return f.recordDroppedEvent("event_processor","replay",y),e.abrupt("return");case 17:var w,x,I,C;return delete g.sdkProcessingMetadata,w=g,x=u,I=v,C=f.getOptions().tunnel,k=(0,G.Jd)((0,G.Cd)(w,(0,G.HY)(w),C,I),[[{type:"replay_event"},w],[{type:"replay_recording",length:"string"==typeof x?new TextEncoder().encode(x).length:x.length},x]]),e.prev=19,e.next=22,m.send(k);case 22:S=e.sent,e.next=30;break;case 25:e.prev=25,e.t0=e.catch(19),b=Error(es);try{b.cause=e.t0}catch(e){}throw b;case 30:if(S){e.next=32;break}return e.abrupt("return",S);case 32:if(!("number"==typeof S.statusCode&&(S.statusCode<200||S.statusCode>=300))){e.next=34;break}throw new nT(S.statusCode);case 34:if(_=(0,X.WG)({},S),!(0,X.Q)(_,"replay")){e.next=37;break}throw new nM(_);case 37:return e.abrupt("return",S);case 38:case"end":return e.stop()}},e,null,[[19,25]])}))).apply(this,arguments)}var nT=function(e){(0,g.Z)(n,e);var t=ee(n);function n(e){return(0,I.Z)(this,n),t.call(this,"Transport returned status code ".concat(e))}return(0,C.Z)(n)}((0,b.Z)(Error)),nM=function(e){(0,g.Z)(n,e);var t=ee(n);function n(e){var r;return(0,I.Z)(this,n),(r=t.call(this,"Rate limit hit")).rateLimits=e,r}return(0,C.Z)(n)}((0,b.Z)(Error));function nR(e){return nA.apply(this,arguments)}function nA(){return(nA=(0,y.Z)(T().mark(function e(t){var n,r,a,i=arguments;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{count:0,interval:5e3},r=t.recordingData,t.options,r.length){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,function(e){return nE.apply(this,arguments)}(t);case 7:return e.abrupt("return",!0);case 10:if(e.prev=10,e.t0=e.catch(4),!(e.t0 instanceof nT||e.t0 instanceof nM)){e.next=14;break}throw e.t0;case 14:if((0,A.v)("Replays",{_retryCount:n.count}),!(n.count>=3)){e.next=20;break}a=Error("".concat(es," - max retries exceeded"));try{a.cause=e.t0}catch(e){}throw a;case 20:return n.interval*=++n.count,e.abrupt("return",new Promise(function(e,r){setTimeout((0,y.Z)(T().mark(function a(){return T().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,nR(t,n);case 3:e(!0),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),r(a.t0);case 9:case"end":return a.stop()}},a,null,[[0,6]])})),n.interval)}));case 22:case"end":return e.stop()}},e,null,[[4,10]])}))).apply(this,arguments)}var nO="__THROTTLED",nD=function(){var e,t,n,r;function a(e){var t,n,r,i,o=this,s=e.options,u=e.recordingOptions;(0,I.Z)(this,a),a.prototype.__init.call(this),a.prototype.__init2.call(this),a.prototype.__init3.call(this),a.prototype.__init4.call(this),a.prototype.__init5.call(this),a.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=u,this._options=s,this._debouncedFlush=function(e,t,n){var r,a,i,o=n&&n.maxWait?Math.max(n.maxWait,t):0;function s(){return u(),r=e()}function u(){void 0!==a&&clearTimeout(a),void 0!==i&&clearTimeout(i),a=i=void 0}function c(){return a&&clearTimeout(a),a=setTimeout(s,t),o&&void 0===i&&(i=setTimeout(s,o)),r}return c.cancel=u,c.flush=function(){return void 0!==a||void 0!==i?s():r},c}(function(){return o._flush()},this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=(t=function(e,t){return t9(o,e)?t6(o,e,t):Promise.resolve(null)},n=new Map,r=function(e){var t=e-5;n.forEach(function(e,r){r<t&&n.delete(r)})},i=!1,function(){var e=Math.floor(Date.now()/1e3);if(r(e),(0,w.Z)(n.values()).reduce(function(e,t){return e+t},0)>=300){var a=i;return i=!0,a?"__SKIPPED":nO}i=!1;var o=n.get(e)||0;return n.set(e,o+1),t.apply(void 0,arguments)});var c=this.getOptions(),l=c.slowClickTimeout,d=c.slowClickIgnoreSelectors,p=l?{threshold:Math.min(3e3,l),timeout:l,scrollTimeout:300,ignoreSelector:d?d.join(","):""}:void 0;p&&(this.clickDetector=new tP(this,p))}return(0,C.Z)(a,[{key:"getContext",value:function(){return this._context}},{key:"isEnabled",value:function(){return this._isEnabled}},{key:"isPaused",value:function(){return this._isPaused}},{key:"isRecordingCanvas",value:function(){return!!this._canvas}},{key:"getOptions",value:function(){return this._options}},{key:"initializeSampling",value:function(e){var t=this._options,n=t.errorSampleRate,r=t.sessionSampleRate;if(!(n<=0)||!(r<=0)){if(this._initializeSessionForSampling(e),!this.session){this._handleException(Error("Unable to initialize and create session"));return}!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",this.recordingMode,this._options._experiments.traceInternals,this._initializeRecording())}}},{key:"start",value:function(){if(this._isEnabled&&"session"===this.recordingMode)throw Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw Error("Replay buffering is in progress, call `flush()` to save the replay");this._options._experiments.traceInternals;var e=t4({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}},{key:"startBuffering",value:function(){if(this._isEnabled)throw Error("Replay recording is already in progress");this._options._experiments.traceInternals;var e=t4({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}},{key:"startRecording",value:function(){try{var e,t,n=this._canvas;this._stopRecording=tR(en(en(en({},this._recordingOptions),"buffer"===this.recordingMode&&{checkoutEveryNms:6e4}),{},{emit:(e=this,t=!1,function(n,r){if(e.checkAndHandleExpiredSession()){var a=r||!t;t=!0,e.clickDetector&&function(e,t){try{if(3!==t.type)return;var n=t.data.source;if(n===e8.Mutation&&e.registerMutation(t.timestamp),n===e8.Scroll&&e.registerScroll(t.timestamp),t.data.source===e8.MouseInteraction){var r=t.data,a=r.type,i=r.id,o=tR.mirror.getNode(i);o instanceof HTMLElement&&a===e6.Click&&e.registerClick(o)}}catch(e){}}(e.clickDetector,n),e.addUpdate(function(){if("buffer"===e.recordingMode&&a&&e.setInitialState(),!t8(e,n,a))return!0;if(!a)return!1;if(t=e,a&&t.session&&0===t.session.segmentId&&t8(t,(r=t.getOptions(),{type:e4.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:r.sessionSampleRate,errorSampleRate:r.errorSampleRate,useCompressionOption:r.useCompression,blockAllMedia:r.blockAllMedia,maskAllText:r.maskAllText,maskAllInputs:r.maskAllInputs,useCompression:!!t.eventBuffer&&"worker"===t.eventBuffer.type,networkDetailHasUrls:r.networkDetailAllowUrls.length>0,networkCaptureBodies:r.networkCaptureBodies,networkRequestHasHeaders:r.networkRequestHeaders.length>0,networkResponseHasHeaders:r.networkResponseHeaders.length>0}}}),!1),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){var t,r,i=e.eventBuffer.getEarliestTimestamp();i&&(e.getOptions()._experiments.traceInternals,e.session.started=i,e.getOptions().stickySession&&t0(e.session))}return"session"===e.recordingMode&&e.flush(),!0})}}),onMutation:this._onMutationHandler},n?{recordCanvas:n.recordCanvas,getCanvasManager:n.getCanvasManager,sampling:n.sampling,dataURLOptions:n.dataURLOptions}:{}))}catch(e){this._handleException(e)}}},{key:"stopRecording",value:function(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}},{key:"stop",value:(e=(0,y.Z)(T().mark(function e(){var t,n,r,a,i=arguments;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0!==(n=(t=i.length>0&&void 0!==i[0]?i[0]:{}).forceFlush)&&n,t.reason,this._isEnabled){e.next=3;break}return e.abrupt("return");case 3:if(this._isEnabled=!1,e.prev=4,this._options._experiments.traceInternals,this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),!r){e.next=12;break}return e.next=12,this._flush({force:!0});case 12:this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,function(){if(tX())try{ei.sessionStorage.removeItem(eo)}catch(e){}}(),this.session=void 0,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),this._handleException(e.t0);case 20:case"end":return e.stop()}},e,this,[[4,17]])})),function(){return e.apply(this,arguments)})},{key:"pause",value:function(){this._isPaused||(this._isPaused=!0,this.stopRecording(),this._options._experiments.traceInternals)}},{key:"resume",value:function(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),this._options._experiments.traceInternals)}},{key:"sendBufferedReplayOrFlush",value:(t=(0,y.Z)(T().mark(function e(){var t,n,r,a,i=arguments;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0===(t=(i.length>0&&void 0!==i[0]?i[0]:{}).continueRecording)||t,"session"!==this.recordingMode){e.next=3;break}return e.abrupt("return",this.flushImmediate());case 3:return r=Date.now(),this._options._experiments.traceInternals,e.next=7,this.flushImmediate();case 7:if(a=this.stopRecording(),!(!n||!a)){e.next=10;break}return e.abrupt("return");case 10:if("session"!==this.recordingMode){e.next=12;break}return e.abrupt("return");case 12:this.recordingMode="session",this.session&&(this._updateUserActivity(r),this._updateSessionActivity(r),this._maybeSaveSession()),this.startRecording();case 15:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"addUpdate",value:function(e){var t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}},{key:"triggerUserActivity",value:function(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}},{key:"updateUserActivity",value:function(){this._updateUserActivity(),this._updateSessionActivity()}},{key:"conditionalFlush",value:function(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}},{key:"flush",value:function(){return this._debouncedFlush()}},{key:"flushImmediate",value:function(){return this._debouncedFlush(),this._debouncedFlush.flush()}},{key:"cancelFlush",value:function(){this._debouncedFlush.cancel()}},{key:"getSessionId",value:function(){return this.session&&this.session.id}},{key:"checkAndHandleExpiredSession",value:function(){if(this._lastActivity&&t2(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled){this.pause();return}return!!this._checkSession()}},{key:"setInitialState",value:function(){var e="".concat(ei.location.pathname).concat(ei.location.hash).concat(ei.location.search),t="".concat(ei.location.origin).concat(e);this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}},{key:"throttledAddEvent",value:function(e,t){var n=this,r=this._throttledAddEvent(e,t);if(r===nO){var a=tz({category:"replay.throttled"});this.addUpdate(function(){return!t8(n,{type:5,timestamp:a.timestamp||0,data:{tag:"breadcrumb",payload:a,metric:!0}})})}return r}},{key:"getCurrentRoute",value:function(){var e=this.lastTransaction||(0,A.nZ)().getTransaction(),t=(e&&(0,F.XU)(e).data||{})[P.Zj];if(e&&t&&["route","custom"].includes(t))return(0,F.XU)(e).description}},{key:"_initializeRecording",value:function(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=function(e){var t=e.useCompression,n=e.workerUrl;if(t&&window.Worker){var r=function(e){try{var t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__){var e;return e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']),URL.createObjectURL(e)}return""}();if(!t)return;var n=new Worker(t);return new tG(n)}catch(e){}}(n);if(r)return r}return new tV}({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}},{key:"_handleException",value:function(e){}},{key:"_initializeSessionForSampling",value:function(e){var t=this._options.errorSampleRate>0,n=t4({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}},{key:"_checkSession",value:function(){if(!this.session)return!1;var e=this.session;return!t5(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}},{key:"_refreshSession",value:(n=(0,y.Z)(T().mark(function e(t){return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isEnabled){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.stop({reason:"refresh session"});case 4:this.initializeSampling(t.id);case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"_addListeners",value:function(){try{ei.document.addEventListener("visibilitychange",this._handleVisibilityChange),ei.addEventListener("blur",this._handleWindowBlur),ei.addEventListener("focus",this._handleWindowFocus),ei.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(function(e){var t=(0,A.nZ)(),n=(0,A.s3)();t.addScopeListener(function(t){if(e.isEnabled()){var n,r=(n=t.getLastBreadcrumb&&t.getLastBreadcrumb(),nx!==n&&n?(nx=n,!n.category||["fetch","xhr","sentry.event","sentry.transaction"].includes(n.category)||n.category.startsWith("ui."))?null:"console"===n.category?function(e){var t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return tz(e);var n=!1,r=t.map(function(e){if(!e)return e;if("string"==typeof e)return e.length>5e3?(n=!0,"".concat(e.slice(0,5e3),"")):e;if("object"==typeof e)try{var t=(0,U.Fv)(e,7);if(JSON.stringify(t).length>5e3)return n=!0,"".concat(JSON.stringify(t,null,2).slice(0,5e3),"");return t}catch(e){}return e});return tz(en(en({},e),{},{data:en(en({},e.data),{},{arguments:r},n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{})}))}(n):tz(n):null);r&&tD(e,r)}}),(0,J.O)(function(t){if(e.isEnabled()){var n,r,a,i=(r=(n=function(e){var t,n="click"===e.name,r=null;try{r=n?tN(e.event):tF(e.event),t=(0,Z.Rt)(r,{maxStringLength:200})||"<unknown>"}catch(e){t="<unknown>"}return{target:r,message:t}}(t)).target,a=n.message,tz(en({category:"ui.".concat(t.name)},tj(r,a))));if(i){var o="click"===t.name,s=o?t.event:void 0;o&&e.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&function(e,t,n){e.handleClick(t,n)}(e.clickDetector,i,tN(t.event)),tD(e,i)}}}),(0,Y.a)(function(t){if(e.isEnabled()){var n,r,a,i=(n=t.from,r=t.to,{type:"navigation.push",start:a=Date.now()/1e3,end:a,name:r,data:{previous:n}});null!==i&&(e.getContext().urls.push(i.name),e.triggerUserActivity(),e.addUpdate(function(){return nr(e,[i]),!1}))}}),function(e){var t=(0,A.s3)();try{var n=new TextEncoder,r=e.getOptions(),a=r.networkDetailAllowUrls,i=r.networkDetailDenyUrls,o=r.networkCaptureBodies,s=r.networkRequestHeaders,u=r.networkResponseHeaders,c={replay:e,textEncoder:n,networkDetailAllowUrls:a,networkDetailDenyUrls:i,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:u};t&&t.on?t.on("beforeAddBreadcrumb",function(e,t){return function(e,t,n){if(t.data)try{var r,a,i,o,s,u;"xhr"===t.category&&(r=n)&&r.xhr&&(function(e,t,n){var r=t.xhr,a=t.input;if(r){var i=ni(a,n.textEncoder),o=r.getResponseHeader("content-length")?no(r.getResponseHeader("content-length")):function(e,t,n){try{var r="json"===t&&e&&"object"==typeof e?JSON.stringify(e):e;return ni(r,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==i&&(e.data.request_body_size=i),void 0!==o&&(e.data.response_body_size=o)}}(t,n,e),function(e,t,n){nw.apply(this,arguments)}(t,n,e)),"fetch"===t.category&&(a=n)&&a.response&&(i=n.input,o=n.response,s=ni(i?nk(i):void 0,e.textEncoder),u=o?no(o.headers.get("content-length")):void 0,void 0!==s&&(t.data.request_body_size=s),void 0!==u&&(t.data.response_body_size=u),function(e,t,n){nm.apply(this,arguments)}(t,n,e))}catch(e){}}(c,e,t)}):((0,V.U)(function(t){e.isEnabled()&&na(e,function(e){var t=e.startTimestamp,n=e.endTimestamp,r=e.fetchData,a=e.response;if(!n)return null;var i=r.method;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:r.url,data:{method:i,statusCode:a?a.status:void 0}}}(t))}),(0,q.UK)(function(t){e.isEnabled()&&na(e,function(e){var t=e.startTimestamp,n=e.endTimestamp,r=e.xhr[q.xU];if(!t||!n||!r)return null;var a=r.method,i=r.url,o=r.status_code;return void 0===i?null:{type:"resource.xhr",name:i,start:t/1e3,end:n/1e3,data:{method:a,statusCode:o}}}(t))}))}catch(e){}}(e);var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?nn(e):void 0;return Object.assign(function(t,r){return e.isEnabled()?"replay_event"===t.type?(delete t.breadcrumbs,t):(!t.type||ne(t)||nt(t))&&e.checkAndHandleExpiredSession()?nt(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),e.triggerUserActivity(),e.addUpdate(function(){return!t.timestamp||(e.throttledAddEvent({type:e4.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)}),t):!t.type&&t.exception&&t.exception.values&&t.exception.values.length&&r.originalException&&r.originalException.__rrweb__&&!e.getOptions()._experiments.captureExceptions?null:(("buffer"===e.recordingMode&&t.message!==es&&t.exception&&!t.type&&t$(e.getOptions().errorSampleRate)||"session"===e.recordingMode)&&(t.tags=en(en({},t.tags),{},{replayId:e.getSessionId()})),n&&n(t,{statusCode:200}),t):t:t},{id:"Replay"})}(e,!(n&&n.on));n&&n.addEventProcessor?n.addEventProcessor(r):(0,D.Q)(r),n&&n.on&&(n.on("beforeSendEvent",function(t){if(e.isEnabled()&&!t.type){var n;n=t.exception&&t.exception.values&&t.exception.values[0].value,"string"==typeof n&&(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))&&tD(e,tz({category:"replay.hydrate-error"}))}}),n.on("afterSendEvent",nn(e)),n.on("createDsc",function(t){var n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)}),n.on("startTransaction",function(t){e.lastTransaction=t}),n.on("finishTransaction",function(t){e.lastTransaction=t}),n.on("beforeSendFeedback",function(t,n){var r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&(e.flush(),t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r))}))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n(e){e.entries.forEach(t)}var r=[];return["navigation","paint","resource"].forEach(function(e){r.push((0,Q._j)(e,n))}),r.push((0,Q.$A)(function(t){var n,r,a,i,o,s=t.metric;e.replayPerformanceEntries.push((a=(r=(n=s.entries)[n.length-1])?r.element:void 0,{type:"largest-contentful-paint",name:"largest-contentful-paint",start:o=tq(i=s.value),end:o,data:{value:i,size:i,nodeId:a?tR.mirror.getId(a):void 0}}))})),function(){r.forEach(function(e){return e()})}}(this)}},{key:"_removeListeners",value:function(){try{ei.document.removeEventListener("visibilitychange",this._handleVisibilityChange),ei.removeEventListener("blur",this._handleWindowBlur),ei.removeEventListener("focus",this._handleWindowFocus),ei.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}},{key:"__init",value:function(){var e=this;this._handleVisibilityChange=function(){"visible"===ei.document.visibilityState?e._doChangeToForegroundTasks():e._doChangeToBackgroundTasks()}}},{key:"__init2",value:function(){var e=this;this._handleWindowBlur=function(){var t=tz({category:"ui.blur"});e._doChangeToBackgroundTasks(t)}}},{key:"__init3",value:function(){var e=this;this._handleWindowFocus=function(){var t=tz({category:"ui.focus"});e._doChangeToForegroundTasks(t)}}},{key:"__init4",value:function(){var e=this;this._handleKeyboardEvent=function(t){!function(e,t){if(e.isEnabled()){e.updateUserActivity();var n=function(e){var t,n=e.metaKey,r=e.shiftKey,a=e.ctrlKey,i=e.altKey,o=e.key,s=e.target;if(!s||"INPUT"===(t=s).tagName||"TEXTAREA"===t.tagName||t.isContentEditable||!o)return null;var u=n||a||i,c=1===o.length;if(!u&&c)return null;var l=(0,Z.Rt)(s,{maxStringLength:200})||"<unknown>",d=tj(s,l);return tz({category:"ui.keyDown",message:l,data:en(en({},d.data),{},{metaKey:n,shiftKey:r,ctrlKey:a,altKey:i,key:o})})}(t);n&&tD(e,n)}}(e,t)}}},{key:"_doChangeToBackgroundTasks",value:function(e){!this.session||t3(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}},{key:"_doChangeToForegroundTasks",value:function(e){this.session&&this.checkAndHandleExpiredSession()&&e&&this._createCustomBreadcrumb(e)}},{key:"_updateUserActivity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastActivity=e}},{key:"_updateSessionActivity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}},{key:"_createCustomBreadcrumb",value:function(e){var t=this;this.addUpdate(function(){t.throttledAddEvent({type:e4.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}},{key:"_addPerformanceEntries",value:function(){var e=this.performanceEntries.map(tH).filter(Boolean).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(nr(this,e))}},{key:"_clearContext",value:function(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}},{key:"_updateInitialTimestampFromEventBuffer",value:function(){var e=this.session,t=this.eventBuffer;if(e&&t&&!e.segmentId){var n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}}},{key:"_popEventContext",value:function(){var e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}},{key:"_runFlush",value:(r=(0,y.Z)(T().mark(function e(){var t,n,r,a,i,o;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getSessionId(),!(!this.session||!this.eventBuffer||!t)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this._addPerformanceEntries();case 6:if(!(!this.eventBuffer||!this.eventBuffer.hasEvents)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,function(e){return nI.apply(this,arguments)}(this);case 10:if(this.eventBuffer){e.next=12;break}return e.abrupt("return");case 12:if(!(t!==this.getSessionId())){e.next=14;break}return e.abrupt("return");case 14:if(e.prev=14,this._updateInitialTimestampFromEventBuffer(),!((n=Date.now())-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)){e.next=19;break}throw Error("Session is too long, not sending replay");case 19:return r=this._popEventContext(),a=this.session.segmentId++,this._maybeSaveSession(),e.next=24,this.eventBuffer.finish();case 24:return i=e.sent,e.next=27,nR({replayId:t,recordingData:i,segmentId:a,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n});case 27:e.next=35;break;case 29:e.prev=29,e.t0=e.catch(14),this._handleException(e.t0),this.stop({reason:"sendReplay"}),(o=(0,A.s3)())&&o.recordDroppedEvent("send_error","replay");case 35:case"end":return e.stop()}},e,this,[[14,29]])})),function(){return r.apply(this,arguments)})},{key:"__init5",value:function(){var e=this;this._flush=(0,y.Z)(T().mark(function t(){var n,r,a,i,o,s,u,c=arguments;return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=void 0!==(n=(c.length>0&&void 0!==c[0]?c[0]:{}).force)&&n,!(!e._isEnabled&&!r)){t.next=3;break}return t.abrupt("return");case 3:if(e.checkAndHandleExpiredSession()){t.next=6;break}return t.abrupt("return");case 6:if(e.session){t.next=8;break}return t.abrupt("return");case 8:if(a=e.session.started,i=Date.now()-a,e._debouncedFlush.cancel(),o=i<e._options.minReplayDuration,s=i>e._options.maxReplayDuration+5e3,!(o||s)){t.next=18;break}return"[Replay] Session duration (".concat(Math.floor(i/1e3),"s) is too ").concat(o?"short":"long",", not sending replay."),e._options._experiments.traceInternals,o&&e._debouncedFlush(),t.abrupt("return");case 18:if((u=e.eventBuffer)&&0===e.session.segmentId&&!u.hasCheckout&&e._options._experiments.traceInternals,e._flushLock){t.next=26;break}return e._flushLock=e._runFlush(),t.next=24,e._flushLock;case 24:return e._flushLock=void 0,t.abrupt("return");case 26:return t.prev=26,t.next=29,e._flushLock;case 29:t.next=34;break;case 31:t.prev=31,t.t0=t.catch(26);case 34:return t.prev=34,e._debouncedFlush(),t.finish(34);case 37:case"end":return t.stop()}},t,null,[[26,31,34,37]])}))}},{key:"_maybeSaveSession",value:function(){this.session&&this._options.stickySession&&t0(this.session)}},{key:"__init6",value:function(){var e=this;this._onMutationHandler=function(t){var n=t.length,r=e._options.mutationLimit,a=e._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>a||i){var o=tz({category:"replay.mutations",data:{count:n,limit:i}});e._createCustomBreadcrumb(o)}return!i||(e.stop({reason:"mutationLimit",forceFlush:"session"===e.recordingMode}),!1)}}}]),a}();function nL(e,t,n,r){var a="string"==typeof r?r.split(","):[],i=[].concat((0,w.Z)(e),(0,w.Z)(a),(0,w.Z)(t));return void 0!==n&&("string"==typeof n&&i.push(".".concat(n)),(0,W.Cf)(function(){console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),i.join(",")}var nN='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',nF=["content-length","content-type","accept"],nP=!1,nB=function(){function e(){var t,n,r,a,i,o,s,u,c,l,d,p,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=f.flushMinDelay,m=f.flushMaxDelay,v=f.minReplayDuration,y=f.maxReplayDuration,g=f.stickySession,k=f.useCompression,S=f.workerUrl,b=f._experiments,_=f.sessionSampleRate,w=f.errorSampleRate,x=f.maskAllText,C=void 0===x||x,E=f.maskAllInputs,T=void 0===E||E,M=f.blockAllMedia,R=f.mutationBreadcrumbLimit,A=f.mutationLimit,O=f.slowClickTimeout,D=f.slowClickIgnoreSelectors,L=f.networkDetailAllowUrls,N=f.networkDetailDenyUrls,F=f.networkCaptureBodies,P=f.networkRequestHeaders,B=f.networkResponseHeaders,U=f.mask,z=f.maskAttributes,Z=void 0===z?["title","placeholder"]:z,j=f.unmask,W=f.block,H=f.unblock,q=f.ignore,K=f.maskFn,V=f.beforeAddRecordingEvent,J=f.beforeErrorSampling,Y=f.blockClass,G=f.blockSelector,X=f.maskInputOptions,Q=f.maskTextClass,ee=f.maskTextSelector,et=f.ignoreClass;(0,I.Z)(this,e),this.name=e.id;var er=(n=(t={mask:void 0===U?[]:U,unmask:void 0===j?[]:j,block:void 0===W?[]:W,unblock:void 0===H?[]:H,ignore:void 0===q?[]:q,blockClass:Y,blockSelector:G,maskTextClass:Q,maskTextSelector:ee,ignoreClass:et}).mask,r=t.unmask,a=t.block,i=t.unblock,o=t.ignore,s=t.blockClass,u=t.blockSelector,c=t.maskTextClass,l=t.maskTextSelector,d=t.ignoreClass,p={maskTextSelector:nL(n,[".sentry-mask","[data-sentry-mask]"],c,l),unmaskTextSelector:nL(r,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:nL(a,[".sentry-block","[data-sentry-block]"].concat(['base[href="/"]']),s,u),unblockSelector:nL(i,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:nL(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],d)},s instanceof RegExp&&(p.blockClass=s),c instanceof RegExp&&(p.maskTextClass=c),p);if(this._recordingOptions=en(en({maskAllInputs:T,maskAllText:C,maskInputOptions:en(en({},X||{}),{},{password:!0}),maskTextFn:K,maskInputFn:K,maskAttributeFn:function(e,t,n){var r,a,i,o,s,u,c;return a=(r={maskAttributes:Z,maskAllText:C,privacyOptions:er,key:e,value:t,el:n}).el,i=r.key,o=r.maskAttributes,s=r.maskAllText,u=r.privacyOptions,c=r.value,!s||u.unmaskTextSelector&&a.matches(u.unmaskTextSelector)?c:o.includes(i)||"value"===i&&"INPUT"===a.tagName&&["submit","button"].includes(a.getAttribute("type")||"")?c.replace(/[\S]/g,"*"):c}},er),{},{slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:function(e){try{e.__rrweb__=!0}catch(e){}}}),this._initialOptions={flushMinDelay:void 0===h?5e3:h,flushMaxDelay:void 0===m?5500:m,minReplayDuration:Math.min(void 0===v?4999:v,15e3),maxReplayDuration:Math.min(void 0===y?36e5:y,36e5),stickySession:void 0===g||g,sessionSampleRate:_,errorSampleRate:w,useCompression:void 0===k||k,workerUrl:S,blockAllMedia:void 0===M||M,maskAllInputs:T,maskAllText:C,mutationBreadcrumbLimit:void 0===R?750:R,mutationLimit:void 0===A?1e4:A,slowClickTimeout:void 0===O?7e3:O,slowClickIgnoreSelectors:void 0===D?[]:D,networkDetailAllowUrls:void 0===L?[]:L,networkDetailDenyUrls:void 0===N?[]:N,networkCaptureBodies:void 0===F||F,networkRequestHeaders:nU(void 0===P?[]:P),networkResponseHeaders:nU(void 0===B?[]:B),beforeAddRecordingEvent:V,beforeErrorSampling:J,_experiments:void 0===b?{}:b},"number"==typeof _&&(console.warn("[Replay] You are passing `sessionSampleRate` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure `replaysSessionSampleRate` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ".concat(_," })")),this._initialOptions.sessionSampleRate=_),"number"==typeof w&&(console.warn("[Replay] You are passing `errorSampleRate` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure `replaysOnErrorSampleRate` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ".concat(w," })")),this._initialOptions.errorSampleRate=w),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?"".concat(this._recordingOptions.blockSelector,",").concat(nN):nN),this._isInitialized&&(0,$.j)())throw Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}return(0,C.Z)(e,[{key:"_isInitialized",get:function(){return nP},set:function(e){nP=e}},{key:"setupOnce",value:function(){var e=this;(0,$.j)()&&(this._setup(),setTimeout(function(){return e._initialize()}))}},{key:"start",value:function(){this._replay&&this._replay.start()}},{key:"startBuffering",value:function(){this._replay&&this._replay.startBuffering()}},{key:"stop",value:function(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}},{key:"flush",value:function(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}},{key:"getReplayId",value:function(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}},{key:"_initialize",value:function(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}},{key:"_setup",value:function(){var e,t,n,r,a=(e=this._initialOptions,n=(t=(0,A.s3)())&&t.getOptions(),r=en({sessionSampleRate:0,errorSampleRate:0},(0,z.Jr)(e)),n?(null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&(0,W.Cf)(function(){console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate),"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate)):(0,W.Cf)(function(){console.warn("SDK client is not available.")}),r);this._replay=new nD({options:a,recordingOptions:this._recordingOptions})}},{key:"_maybeLoadFromReplayCanvasIntegration",value:function(){try{var e=(0,A.s3)().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}],[{key:"__initStatic",value:function(){this.id="Replay"}}]),e}();function nU(e){return[].concat(nF,(0,w.Z)(e.map(function(e){return e.toLowerCase()})))}nB.__initStatic()}}]);